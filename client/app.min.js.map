{"version":3,"sources":["app.min.js"],"names":["angular","module","config","$stateProvider","$locationProvider","$urlRouterProvider","state","url","templateUrl","controller","otherwise","html5Mode","$scope","year","Date","getFullYear","$rootScope","prismHighlight","Prism","highlightAll","tinymceUsage","setup","editor","on","event","keyCode","shiftKey","execCommand","preventDefault","height","plugins","toolbar","valid_elements","$on","evt","directive","$timeout","restrict","link","scope","element","attr","$last","$emit","onFinishRepeat","attrs","group","meanData","getDocCountsByCategory","subCatCounts","then","result","html","data","getQueCountsByCategory","app","authentication","error","login","user","window","location","href","register","createUser","userr","res","alert","message","err","statusText","$location","$sce","$stateParams","$state","isLoggedIn","navTitle","getCategories","getCategoriesByGroup","mainCategories","errmsg","submitCat","addCat","createCategory","reload","console","log","goToSubCatPage","mainCategory","category","path","updateCategory","uCat","deleteCategory","id","docId","subCategory","hostName","protocol","host","showCategories","categoriesOptions","goToDataNav","getDocsByCategory","getDocByCategory","docs","totalItems","length","currentPage","updateDocList","submitDoc","addD","related","selRelateds","forEach","elem","push","currentUser","author","name","createDoc","showAdd","$window","clearPanels","filteredQuestions","filteredDocs","showSearchDropDown","curSelSearchKw","$digest","clickSearch","keywordBackup","keyword","doSearch","focusSearch","signal","op","curSelSearchTitle","document","getElementById","ori","style","backgroundColor","text","mouseEnterSearch","val","mouseLeaveSearch","$watch","searchTitle","selector","getDocTitleByKeyword","findedTile","getQueTitleByKeyword","getQuesByKeyword","questions","showAnswer","updateQueList","getDocByKeyword","toFocus","queId","getQuesByCategory","submitQue","addQ","createQue","service","$http","$q","saveToken","token","localStorage","getToken","payload","split","atob","JSON","parse","exp","now","defer","getUserById","_id","resolve","promise","post","success","logout","removeItem","serverUrl","getAllUsers","get","newUser","updateUser","put","deleteUser","getQueById","getQueCategories","newQuestion","updateQue","updateQuestion","deleteQue","getDocById","getDocCategories","doc","updateDoc","deleteDoc","cat","getRelatedByKeyword","p","Promise","reject","all","require","numPerPage","doDeepCopy","backupDoc","copy","begin","end","slice","resetUpdateDoc","confirm","isUpdateDoc","Object","keys","property","setTimeout","selRelatedsUpdate","value","isActive","viewLocation","indexOf","questionId","getQuestionById","question","isUpdateQuestion","deleteQuestion","removeCurSelRelated","index","splice","addThisRelated","thisRelated","i","title","searchRelatedKeyword","rest","relateds","object","obj","relatedsUpdate"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n  angular.module('app', ['ui.router', 'ngAnimate', 'ui.bootstrap', 'ngSanitize', 'ui.tinymce'])\n  .config(['$stateProvider', '$locationProvider', '$urlRouterProvider',\n    function ($stateProvider, $locationProvider, $urlRouterProvider) {\n      $stateProvider\n        .state('root', {\n          url: '/',\n          templateUrl: '/home/home.view.html',\n          controller: \"homeCtrl\"\n        })\n        .state('login/register', {\n          url: '/login', // can't named \"auth\"\n          templateUrl: \"/auth/auth.view.html\",\n          controller: \"loginCtrl\"\n        })\n        .state('dataNav', {\n          url: '/nav/:group',\n          templateUrl: \"/data_nav/data.nav.view.html\",\n          controller: \"dataNavCtrl\"\n        })\n        .state('documentsByCategory', {\n          url: '/doc/:mainCategory/:category',\n          templateUrl: \"/document/document.view.html\",\n          controller: \"docCtrl\"\n        })\n        .state('specific_document', {\n          url: '/doc?id',\n          templateUrl: \"/document/document.view.html\",\n          controller: \"docCtrl\"\n        })\n        .state('questionByCategory', {\n          url: '/que/:mainCategory/:category',\n          templateUrl: \"/question/question.view.html\",\n          controller: \"queCtrl\"\n        })\n        .state('specific_question', {\n          url: '/que?id',\n          templateUrl: \"/question/question.view.html\",\n          controller: \"queCtrl\"\n        })\n        .state('admin', {\n          url: '/admin',\n          templateUrl: \"/admin/admin.view.html\",\n          controller: \"adminCtrl\"\n        })\n\n        $urlRouterProvider.otherwise('/');\n\n      $locationProvider.html5Mode(true);\n\n  }]).controller('footerCtrl', ['$scope', function ($scope) {\n    $scope.year = new Date().getFullYear();\n  }]).controller('mainCtrl', ['$scope', '$rootScope', function($scope, $rootScope){\n    $rootScope.prismHighlight = function(){\n      Prism.highlightAll();\n    };\n\n    $rootScope.tinymceUsage = {\n\t  setup: function(editor){\n\t\t  editor.on('keydown', function(event){\n\t\t\t if(event.keyCode == 9){\n\t\t\t\t if(event.shiftKey){\n\t\t\t\t\t editor.execCommand('Outdent');\n\t\t\t\t }else{\n\t\t\t\t\t editor.execCommand('Indent');\n\t\t\t\t }\n\t\t\t\t event.preventDefault();\n\t\t\t\t return false;\n\t\t\t } \n\t\t  });\n\t  },\n      height: 250,\n      plugins: 'link image codesample advlist code preview',\n      toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | codesample | link image',\n      valid_elements : '*[*]'\n    };\n    $rootScope.$on('onFinishRepeat', function(evt){\n      $scope.prismHighlight();\n    });\n    \n  }]).directive('onFinishRepeat', ['$timeout', function($timeout){\n    return {\n      restrict: 'A',\n      link: function(scope, element, attr){\n        if(scope.$last === true){\n          $timeout(function(){\n            scope.$emit(attr.onFinishRepeat);\n          });\n        }\n      }\n    }\n  }]).directive('subCatCounts', function(){\n    return function(scope, element, attrs){\n      if(scope.group == 'doc'){\n        scope.meanData.getDocCountsByCategory(attrs.subCatCounts)\n                          .then(function(result){\n          element.html(result.data);\n        });\n      }\n      if(scope.group == 'que'){\n        scope.meanData.getQueCountsByCategory(attrs.subCatCounts)\n                          .then(function(result){\n          element.html(result.data);\n        });\n      }\n    };\n  });\n})();\n(function(){\r\n\tvar app = angular.module('app');\r\n\tapp.controller('adminCtrl', [\"$scope\", function($scope){\r\n\r\n\t}]);\r\n})();\n(function () {\n  angular.module('app')\n    .controller('loginCtrl', ['$scope', 'authentication', 'meanData', function ($scope, authentication, meanData) {\n\n      $scope.error = false;\n\n      $scope.login = function () {\n        authentication.login($scope.user)\n          .error(function () {\n            $scope.error = true;\n          })\n          .then(function () {\n            \n            window.location.href = \"/\";\n          })\n      };\n\n      $scope.register = function () {\n        meanData.createUser($scope.userr).then(function (res) {\n          alert(res.data.message);\n          $scope.user = $scope.userr;\n          $scope.login();\n        },function(err){\n          alert(err.statusText);\n        })\n      };\n\n    }])\n})();\n(function () {\r\n  angular.module('app').controller('dataNavCtrl', ['$scope', 'meanData', 'authentication', '$location', '$sce', '$stateParams', '$state',\r\n    function ($scope, meanData, authentication, $location, $sce, $stateParams, $state) {\r\n        \r\n        $scope.meanData = meanData;\r\n        $scope.isLoggedIn = authentication.isLoggedIn();\r\n\r\n        $scope.group = $stateParams.group;\r\n\r\n        if($scope.group == 'doc'){\r\n          $scope.navTitle = \"Documents\"\r\n        }\r\n        if($scope.group == 'que'){\r\n          $scope.navTitle = \"Questions Set\"\r\n        }\r\n\r\n        $scope.getCategories = function(){\r\n          meanData.getCategoriesByGroup($scope.group).then(function(data){\r\n            $scope.mainCategories = data.data;\r\n          }, function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.submitCat = function(){\r\n          $scope.addCat.group = $scope.group;\r\n          meanData.createCategory($scope.addCat).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          }, function(err){\r\n            console.log(err);\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.goToSubCatPage = function(mainCategory,category){\r\n          $location.path(\"/\"+$scope.group+\"/\"+mainCategory+\"/\"+category);\r\n        };\r\n\r\n        $scope.updateCategory = function(uCat){\r\n          meanData.updateCategory(uCat).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          },function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.deleteCategory = function(id){\r\n          meanData.deleteCategory(id).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          },function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n    }]);\r\n})();\n(function () {\r\n  angular.module('app').controller('docCtrl', ['$scope', 'meanData', 'authentication', '$location', '$sce', '$stateParams',\r\n    function ($scope, meanData, authentication, $location, $sce, $stateParams) {\r\n        \r\n        $scope.meanData = meanData;\r\n        $scope.docId = $stateParams.id;\r\n        $scope.subCategory = $stateParams.category;\r\n        $scope.mainCategory = $stateParams.mainCategory;\r\n        \r\n        $scope.hostName = $location.protocol() + \"://\" + location.host;\r\n\r\n        $scope.isLoggedIn = authentication.isLoggedIn();\r\n\r\n        $scope.showCategories = function(){\r\n          meanData.getCategoriesByGroup('doc').then(function(res){\r\n            $scope.categoriesOptions = res.data;\r\n          });\r\n        };\r\n\r\n        $scope.goToDataNav = function(){\r\n          $location.path(\"/nav/doc\");\r\n        };\r\n        \r\n    \t\t$scope.getDocsByCategory = function(){\r\n          if(!$scope.docId){\r\n              meanData.getDocByCategory($scope.subCategory).then(function (data) {\r\n                $scope.docs = data.data;\r\n                $scope.totalItems = data.data.length;\r\n                $scope.currentPage = 1;\r\n                $scope.updateDocList();\r\n            });\r\n          }\r\n    \t\t};\r\n\r\n      \t$scope.submitDoc = function(){\r\n          if($scope.addD){\r\n            $scope.addD.related = [];\r\n            $scope.selRelateds.forEach(function(elem){\r\n              $scope.addD.related.push(elem);\r\n            });\r\n\r\n            authentication.currentUser().then(function(res){\r\n              $scope.addD.author = res.name;\r\n\r\n              meanData.createDoc($scope.addD).then(function (res) {\r\n                alert(res.data.message);\r\n                $scope.getDocsByCategory();\r\n                $scope.showAdd = false;\r\n                $scope.addD = null; // reset add document panel\r\n                }, function(err){\r\n                alert(err.data.message);\r\n              });\r\n            });\r\n          }\r\n      \t};\r\n    }]);\r\n})();\n(function () {\n  angular.module('app').controller('homeCtrl', ['$scope', '$window', '$location', 'meanData', 'authentication',\n    function ($scope, $window, $location, meanData, authentication) {\n\n      $scope.showSearchDropDown = false;\n      $scope.curSelSearchKw = -1;\n      $scope.isLoggedIn = authentication.isLoggedIn();\n\n      $scope.hostName = $location.protocol() + \"://\" + location.host;\n\n      angular.element($window).on('click', function(){\n        $scope.showSearchDropDown = false;\n        $scope.$digest();\n      });\n\n      $scope.clickSearch = function(){\n        $scope.keywordBackup = $scope.keyword;\n        $scope.$digest();\n        $scope.doSearch(0);\n      }\n      \n      $scope.focusSearch = function(signal){\n        var op = $scope.curSelSearchKw*1 + signal*1;\n        var curSelSearchTitle = document.getElementById(\"search-\" + op);\n        if(curSelSearchTitle){\n          var ori = document.getElementById(\"search-\" + $scope.curSelSearchKw);\n          if(ori){ ori.style.backgroundColor = null; }\n          curSelSearchTitle.style.backgroundColor = \"#ccc\";\n\n          $scope.curSelSearchKw = $scope.curSelSearchKw*1 + signal*1;\n          $scope.keyword = curSelSearchTitle.text;\n          $scope.keywordBackup = curSelSearchTitle.text;\n          $scope.$digest();\n        }\n      }\n\n      $scope.mouseEnterSearch = function(val){\n        $scope.keyword = val;\n        $scope.$digest();\n      }\n\n      $scope.mouseLeaveSearch = function(){\n        $scope.keyword = $scope.keywordBackup;\n        $scope.$digest();\n      }\n\n      function clearPanels(){\n        $scope.filteredQuestions = null;\n        $scope.filteredDocs = null;\n      }\n\n      $scope.meanData = meanData;\n\n      $scope.$watch('selector', function(){\n        $scope.keyword = \"\";\n        clearPanels();\n      });\n\n      $scope.searchTitle = function(){\n        if($scope.keyword){\n          $scope.showSearchDropDown = true;\n          $scope.curSelSearchKw = -1;\n          $scope.keywordBackup = $scope.keyword;\n\n          if($scope.selector == 'Doc'){\n            meanData.getDocTitleByKeyword($scope.keyword).then(function(res){\n              $scope.findedTile = res.data;\n            });\n          }\n          if($scope.selector == 'Quiz'){\n            meanData.getQueTitleByKeyword($scope.keyword).then(function(res){\n              $scope.findedTile = res.data;\n            });\n          }\n        }else{\n          $scope.showSearchDropDown = false;\n        }\n      };\n      /* signal: 1-> if I enter the search keyword, then need to check whether is specific \n                  0-> because I select a specific keytitle, so is already specific\n      */\n      $scope.doSearch = function(signal){\n        if($scope.keyword && $scope.selector){\n          $scope.showSearchDropDown = false;\n          $scope.currentPage = 1;\n          if($scope.selector == 'Quiz'){\n            meanData.getQuesByKeyword($scope.keyword).then(function (res){\n              $scope.questions = res.data;\n              if((signal == 1 && $scope.curSelSearchKw != -1) || signal == 0){ \n                $scope.questions[0].showAnswer= true; \n              }\n              $scope.totalItems = res.data.length;\n              $scope.updateQueList();\n            });\n          }\n          if($scope.selector == 'Doc'){\n            meanData.getDocByKeyword($scope.keyword).then(function (res){\n              $scope.docs = res.data;\n              if(signal == 1 && $scope.curSelSearchKw != -1 || signal == 0){ \n                $scope.docs[0].showAnswer= true; \n              }\n              $scope.totalItems = res.data.length;\n              $scope.updateDocList();\n            });\n          }\n        }else{clearPanels();}\n      };\n      \n    }]);\n  angular.module('app').directive('toFocus', function(){\n    return {\n      scope: false,\n      restrict: \"A\",\n      link: function(scope, elem, attr){\n        elem.on('click', function(){\n          scope.clickSearch();\n        });\n        elem.on('mouseenter', function(evt){\n          scope.mouseEnterSearch(attr.toFocus, evt);\n        });\n        elem.on('mouseleave', function(evt){\n          scope.mouseLeaveSearch(evt);\n        });\n      }\n    }\n  });\n  angular.module('app').directive('searchFocus', function(){\n    return {\n      scope: false,\n      restrict: \"A\",\n      link: function(scope, elem, attr){\n        elem.on('keydown', function(evt){\n          if(evt.keyCode == 13){\n            scope.doSearch(1);\n          }\n          if(evt.keyCode == 40 || evt.keyCode == 38){\n            if(scope.showSearchDropDown){\n              evt.preventDefault();\n              if(evt.keyCode == 40){\n                scope.focusSearch(1);\n              }else{\n                scope.focusSearch(-1);\n              }\n            }\n          }\n        });\n      }\n    }\n  });\n})();\n(function () {\r\n  angular.module('app').controller('queCtrl', ['$scope', 'meanData', 'authentication', '$location', '$sce', '$stateParams',\r\n    function ($scope, meanData, authentication, $location, $sce, $stateParams) {\r\n\r\n        $scope.meanData = meanData;\r\n        $scope.queId = $stateParams.id;\r\n        $scope.subCategory = $stateParams.category;\r\n        $scope.mainCategory = $stateParams.mainCategory;\r\n        $scope.authentication = authentication;\r\n\r\n        $scope.hostName = $location.protocol() + \"://\" + location.host;\r\n\r\n        $scope.isLoggedIn = authentication.isLoggedIn();\r\n        \r\n        $scope.showCategories = function(){\r\n          meanData.getCategoriesByGroup('que').then(function(res){\r\n            $scope.categoriesOptions = res.data;\r\n          });\r\n        };\r\n\r\n        $scope.goToDataNav = function(){\r\n          $location.path(\"/nav/que\");\r\n        };\r\n\r\n        $scope.getQuesByCategory = function(){\r\n          if(!$scope.docId){\r\n              meanData.getQuesByCategory($scope.subCategory).then(function (data) {\r\n                $scope.questions = data.data;\r\n                $scope.totalItems = data.data.length;\r\n                $scope.currentPage = 1;\r\n                $scope.updateQueList();\r\n            });\r\n          }\r\n        };\r\n\r\n        $scope.submitQue = function(){\r\n          if($scope.addQ){\r\n            $scope.addQ.related = [];\r\n            $scope.selRelateds.forEach(function(elem){\r\n              $scope.addQ.related.push(elem);\r\n            });\r\n\r\n            authentication.currentUser().then(function(res){\r\n              $scope.addQ.author = res.name;\r\n\r\n              meanData.createQue($scope.addQ).then(function (res) {\r\n                alert(res.data.message);\r\n                $scope.getQuesByCategory();\r\n                $scope.showAdd = false;\r\n                $scope.addQ = null; // reset add document panel\r\n                }, function(err){\r\n                alert(err.data.message);\r\n              });\r\n            });\r\n          }\r\n        };\r\n    }]);\r\n})();\n(function () {\n  angular.module('app').service('authentication', ['$http', '$window', 'meanData', '$q', function ($http, $window, meanData, $q) {\n\n    var saveToken = function (token) {\n      $window.localStorage['mean-token'] = token;\n    };\n\n    var getToken = function () {\n      return $window.localStorage['mean-token'];\n    };\n\n    var isLoggedIn = function () {\n      var token = getToken();\n      var payload;\n\n      if(token){\n        payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n\n        return payload.exp > Date.now() / 1000;\n      }else{\n        return false;\n      }\n    };\n\n    var currentUser = function() {\n      if(isLoggedIn()){\n        var token = getToken();\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        var defer = $q.defer();\n        meanData.getUserById(payload._id).then(function(res){\n          defer.resolve(res.data);\n        });\n        return defer.promise;\n      }\n    };\n\n    var login = function (user) {\n      return $http.post('/api/login', user).success(function (data) {\n        saveToken(data.token);\n      })\n    };\n\n    var logout = function () {\n      $window.localStorage.removeItem('mean-token');\n    };\n\n    return {\n      login: login,\n      isLoggedIn: isLoggedIn,\n      currentUser: currentUser,\n      logout: logout\n    }\n\n  }])\n  \n})();\n(function () {\n  angular.module('app').service('meanData', ['$http', '$q', function meanData($http, $q) {\n    var serverUrl = \"/api\";\n    /***** User *****/\n\n    var getAllUsers = function () {\n      return $http.get(serverUrl + '/user');\n    };\n\n    var getUserById = function (id) {\n      return $http.get(serverUrl + '/user/' + id);\n    };\n\n    var createUser = function (newUser) {\n      return $http.post(serverUrl + '/user', newUser, {});\n    };\n\n    var updateUser = function (updateUser) {\n      return $http.put(serverUrl + '/user', updateUser, {});\n    };\n\n    var deleteUser = function (id) {\n      return $http.delete(serverUrl + '/user?id=' + id, {});\n    };\n\n    /***** Question *****/\n\n    var getQuesByCategory = function(category){\n      return $http.get(serverUrl + '/que/c/' + category); \n    };\n\n    var getQueById = function(id){\n      return $http.get(serverUrl + '/que/id/' + id); \n    };\n\n    var getQueCategories = function(){\n      return $http.get(serverUrl + '/que/c');\n    };\n\n    var createQue = function (newQuestion) {\n      return $http.post(serverUrl + '/que', newQuestion, {});\n    };\n\n    var updateQue = function (updateQuestion) {\n      return $http.put(serverUrl + '/que', updateQuestion, {});\n    };\n\n    var deleteQue = function (id) {\n      return $http.delete(serverUrl + '/que/id/' + id, {});\n    };\n\n    var getQueTitleByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/q/' + keyword + \"?need=title\"); \n    };\n\n    var getQuesByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/q/' + keyword + \"?need=\"); \n    };\n\n    /***** Document *****/\n\n    var getDocById = function(id){\n      return $http.get(serverUrl + '/doc/id/' + id);\n    };\n\n    var getDocCategories = function(){\n      return $http.get(serverUrl + '/doc/c');\n    };\n\n    var getDocByCategory = function(category){\n      return $http.get(serverUrl + '/doc/c/' + category);\n    };\n\n    var createDoc = function(doc){\n      return $http.post(serverUrl + '/doc', doc);\n    };\n\n    var updateDoc = function(doc){\n      return $http.put(serverUrl + '/doc', doc);\n    };\n\n    var deleteDoc = function(id){\n      return $http.delete(serverUrl + '/doc/id/' + id);\n    }\n\n    var getDocTitleByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/d/' + keyword + \"?need=title\");\n    }\n\n    var getDocByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/d/' + keyword + \"?need=\");\n    }\n\n    /***** Category *****/\n    var getCategories = function(){\n      return $http.get(serverUrl + '/cat');\n    }\n\n    var getCategoriesByGroup = function(group){\n      return $http.get(serverUrl + '/cat/' + group);\n    }\n\n    var createCategory = function(cat){\n      return $http.post(serverUrl + '/cat', cat);\n    }\n\n    var updateCategory = function(cat){\n      return $http.put(serverUrl + '/cat', cat);\n    }\n\n    var deleteCategory = function(id){\n      return $http.delete(serverUrl + '/cat/id/' + id);\n    }\n\n    /***** Count *****/\n    var getDocCountsByCategory = function(category){\n      return $http.get(serverUrl + '/count/doc/' + category);\n    }\n\n    var getQueCountsByCategory = function(category){\n      return $http.get(serverUrl + '/count/que/' + category);\n    }\n\n    var getRelatedByKeyword = function(keyword){\n      var p =new Promise(function(resolve, reject){\n        $q.all([\n          $http.get(serverUrl + '/s/d/' + keyword + \"?need=title+group\"),\n          $http.get(serverUrl + '/s/q/' + keyword + \"?need=title+group\")\n        ]).then(function(res){\n          resolve(res);\n        });\n      });\n      return p;\n    }\n\n    return {\n      getAllUsers: getAllUsers,\n      createUser: createUser,\n      updateUser: updateUser,\n      deleteUser: deleteUser,\n      getUserById: getUserById,\n\n      getQueById: getQueById,\n      getQueCategories: getQueCategories,\n      getQuesByCategory: getQuesByCategory,\n      createQue: createQue,\n      updateQue: updateQue,\n      deleteQue: deleteQue,\n\n      getDocById: getDocById,\n      getDocCategories: getDocCategories,\n      getDocByCategory: getDocByCategory,\n      createDoc: createDoc,\n      updateDoc: updateDoc,\n      deleteDoc: deleteDoc,\n\n      getCategories: getCategories,\n      getCategoriesByGroup: getCategoriesByGroup,\n      createCategory: createCategory,\n      updateCategory: updateCategory,\n      deleteCategory: deleteCategory,\n\n      getQueTitleByKeyword: getQueTitleByKeyword,\n      getDocTitleByKeyword: getDocTitleByKeyword,\n      getQuesByKeyword: getQuesByKeyword,\n      getDocByKeyword: getDocByKeyword,\n      getRelatedByKeyword: getRelatedByKeyword,\n\n      getDocCountsByCategory: getDocCountsByCategory,\n      getQueCountsByCategory: getQueCountsByCategory\n    }\n  }])\n})();\n(function () {\r\n\tangular.module('app').directive('listDoc', function () {\r\n\t\treturn {\r\n      \t\trestrict: 'E',\r\n      \t\trequire: '?ngModel',\r\n\t\t\tscope: false,\r\n      \t\ttemplateUrl: '/common/directives/list-document/list-document.view.html',\r\n      \t\tlink: function(scope, element, attr){\r\n      \t\t\tscope.numPerPage = 5;\r\n\r\n      \t\t\tif(scope.docId){\r\n      \t\t\t\tscope.meanData.getDocById(scope.docId).then(function(res){\r\n      \t\t\t\t\tscope.filteredDocs = [res.data];\r\n      \t\t\t\t\tscope.filteredDocs[0].showAnswer = true;\r\n      \t\t\t\t});\r\n      \t\t\t}\r\n\r\n      \t\t\tscope.doDeepCopy = function(doc){\r\n      \t\t\t\tscope.backupDoc = angular.copy(doc);\r\n      \t\t\t}\r\n\r\n\t\t\t\tscope.updateDocList = function(){\r\n\t\t\t\t\tvar begin = (scope.currentPage - 1) * scope.numPerPage;\r\n\t\t\t\t\tvar end = begin + scope.numPerPage;\r\n\t\t\t\t\tif(scope.docs){\r\n\t\t\t\t  \t\tscope.filteredDocs = scope.docs.slice(begin, end);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t    scope.$watch(\"currentPage + numPerPage\", scope.updateDocList);\r\n\r\n\t\t        scope.resetUpdateDoc = function(doc){\r\n\t\t          if(confirm(\"Are you sure to discard your records?\")){\r\n\t\t          \tscope.backupDoc.isUpdateDoc = false;\r\n\t\t          \t\r\n\t\t          \tObject.keys(doc).forEach(function(property){\r\n\t\t          \t\tdoc[property] = scope.backupDoc[property];\r\n\t\t          \t});\t          \r\n\t\t          \tsetTimeout(function(){\r\n\t\t          \t\tscope.prismHighlight();\r\n\t\t          \t});\r\n\t\t          }\r\n\t\t        }\r\n\r\n\t\t\t    scope.updateDoc = function(doc, selRelatedsUpdate){\r\n\t\t\t\t\tif(confirm(\"Are you sure to make a update?\")){\r\n\t\t\t\t\t\tdoc.related = [];\r\n\t\t          \t\tselRelatedsUpdate.forEach(function(elem){\r\n\t\t\t            \tdoc.related.push(elem);\r\n\t\t\t          \t});\r\n\t\t\t      \t\tscope.meanData.updateDoc(doc).then(function (res) {\r\n\t\t\t        \t\talert(res.data.message);\r\n\t\t\t        \t\tdoc.isUpdateDoc=false;\r\n\t\t\t        \t\tsetTimeout(function(){\r\n\t\t\t\t          \t\tscope.prismHighlight();\r\n\t\t\t\t          \t});\r\n\t\t\t      \t\t  }, function(res){\r\n\t\t\t      \t\t\talert(res.statusText);\r\n\t\t\t      \t\t});\r\n\t\t\t      \t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.deleteDoc = function(doc){\r\n\t\t\t\t\tif(confirm(\"Are you sure to delete this document?\")){\r\n\t\t\t\t\t\tscope.meanData.deleteDoc(doc._id).then(function(res){\r\n\t\t\t\t\t\t\talert(res.data.message);\r\n\t\t\t\t\t\t\tscope.getDocsByCategory(doc.category);\r\n\t\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t\talert(res.statusText);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n      \t\t}\r\n    \t}\r\n  \t})\r\n})();\n(function () {\n  angular.module('app').directive('navigation', function () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/common/directives/navigation/navigation.view.html'\n    }\n  }).controller('navCtrl', ['$scope', '$location', 'authentication', function($scope, $location, authentication){\n    $scope.logout = function () {\n      authentication.logout();\n      window.location.href = \"/\";\n    };\n    // get current user\n\tvar promise = authentication.currentUser();\n\tif(promise){\n\t\tpromise.then(function(value){\n\t    \t$scope.currentUser = value;\n\t    });\n\t}\n\t\n    $scope.isLoggedIn = authentication.isLoggedIn();\n    $scope.isActive = function(viewLocation){\n      if(viewLocation === '/')\n        return $location.path() === viewLocation;\n      return $location.path().indexOf(viewLocation) >= 0;\n    };\n  }])\n})();\n(function () {\n\tangular.module('app').directive('listQue', function () {\n\t\treturn {\n\t\t\tscope: false,\n      \t\trestrict: 'E',\n      \t\ttemplateUrl: '/common/directives/list-question/list-question.view.html',\n      \t\tlink: function(scope, element, attr){\n      \t\t\tscope.numPerPage = 5;\n\n      \t\t\t// receive question id\n\t\t        if(scope.questionId){\n\t\t    \t      scope.meanData.getQuestionById(scope.questionId).then(function(res){\n\t\t          \t\tscope.filteredQuestions = [res.data];\n\t\t          \t\tscope.showAnswer = !scope.showAnswer;\n\t\t          });\n\t\t        }\n\n\t\t\t\tscope.updateQueList = function(){\n\t\t\t\t\tvar begin = (scope.currentPage - 1) * scope.numPerPage;\n\t\t\t\t\tvar end = begin + scope.numPerPage;\n\t\t\t\t\tif(scope.questions){\n\t\t\t\t  \t\tscope.filteredQuestions = scope.questions.slice(begin, end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t    scope.$watch('currentPage + numPerPage', scope.updateQueList);\n\n\t\t\t    scope.updateQuestion = function(question, updateQuestion, selRelateds){\n\t\t\t    \tif(confirm(\"Are you sure to update?\")){\n\t\t\t    \t\tscope.authentication.currentUser().then(function(res){\n\t\t\t\t          updateQuestion.author = res.name;\n\t\t\t\t        });\n\t\t\t\t        updateQuestion.related = [];\n\t\t          \t\tselRelateds.forEach(function(elem){\n\t\t\t            \tupdateQuestion.related.push(elem);\n\t\t\t          \t});\n\t\t\t\t        \n\t              \t\tscope.meanData.updateQue(updateQuestion).then(function(res){\n\t\t\t\t\t\t\talert(res.data.message);\n\t\t\t\t\t\t\t// question.answer = updateQuestion.answer;\n\t\t\t\t\t\t\tquestion.isUpdateQuestion = false;\n\t\t\t\t\t\t}, function(res){\n\t\t\t\t\t\t\talert(res.statusText);\n\t\t\t\t\t\t});\n\t\t\t    \t}\n\t\t\t\t};\n\n\t\t\t\tscope.deleteQuestion = function(question){\n\t\t\t\t\tif(confirm(\"Are you sure to delete this question?\")){\n\t\t\t\t\t\tscope.meanData.deleteQue(question._id).then(function(res){\n\t\t\t\t\t\t\talert(res.data.message);\n\t\t\t\t\t\t\tscope.getQuesByCategory(question.category);\n\t\t\t\t\t\t},function(res){\n\t\t\t\t\t\t\talert(res.statusText);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n      \t\t}\n    \t}\n  \t})\n})();\n(function(){\r\n\tangular.module('app').directive('related', function(){\r\n\t\treturn {\r\n\t\t\tscope: false,\r\n\t\t\trestrict: 'E',\r\n\t\t\ttemplateUrl: '/common/directives/related/related.view.html',\r\n\t\t\tlink: function(scope, element, attr){\r\n\r\n\t\t\t\tscope.removeCurSelRelated = function(selRelateds, index){\r\n\t\t          selRelateds.splice(index, 1);\r\n\t\t        };\r\n\r\n\t\t\t\tscope.addThisRelated = function(selRelateds, thisRelated){\r\n\t\t          if(!thisRelated)\r\n\t\t            return false;\r\n\t\t          if(selRelateds.length < 1){\r\n\t\t            selRelateds.push(thisRelated[0]);\r\n\t\t          }else{\r\n\t\t            for(var i = 0; i < selRelateds.length; i++){\r\n\t\t              if(selRelateds[i].title != thisRelated[0].title){\r\n\t\t                if(i == (selRelateds.length-1)){\r\n\t\t                  selRelateds.push(thisRelated[0]);\r\n\t\t                }\r\n\t\t              }else{\r\n\t\t                break;\r\n\t\t              }\r\n\t\t            }\r\n\t\t          }\r\n\t\t        };\r\n\r\n\t\t        scope.getRelatedByKeyword = function(searchRelatedKeyword, rest){\r\n\t\t          if(searchRelatedKeyword){\r\n\t\t            scope.meanData.getRelatedByKeyword(searchRelatedKeyword).then(function(data){\r\n\t\t              var relateds = [];\r\n\t\t              data.forEach(function(object){\r\n\t\t                object.data.forEach(function(obj){\r\n\t\t                  relateds.push(obj);\r\n\t\t                });\r\n\t\t              });\r\n\t\t              if(rest == 'put'){\r\n\t\t                scope.relatedsUpdate = relateds;\r\n\t\t              }\r\n\t\t              if(rest == 'post'){\r\n\t\t                scope.relateds = relateds;\r\n\t\t              }\r\n\t\t            });\r\n\t\t          }\r\n\t\t        };\r\n\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n})();"]}