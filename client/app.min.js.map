{"version":3,"sources":["app.min.js"],"names":["angular","module","config","$stateProvider","$locationProvider","$urlRouterProvider","state","url","templateUrl","controller","otherwise","html5Mode","$scope","year","Date","getFullYear","$rootScope","prismHighlight","Prism","highlightAll","tinymceUsage","setup","editor","on","event","keyCode","shiftKey","execCommand","preventDefault","height","plugins","toolbar","valid_elements","$on","evt","directive","$timeout","restrict","link","scope","element","attr","$last","$emit","onFinishRepeat","attrs","group","meanData","getDocCountsByCategory","subCatCounts","then","result","html","data","getQueCountsByCategory","app","authentication","$window","error","login","user","window","location","href","register","createUser","userr","res","alert","message","err","statusText","$location","$sce","$stateParams","$state","isLoggedIn","navTitle","getCategories","getCategoriesByGroup","mainCategories","errmsg","submitCat","addCat","createCategory","reload","console","log","goToSubCatPage","mainCategory","category","path","updateCategory","uCat","deleteCategory","id","hostName","protocol","host","goToDataNav","cancelAddDoc","confirm","selRelateds","addD","addDocPage","Object","showAdd","showCategories","categorySetter","submitDoc","related","categorModel_","forEach","elem","push","author","currentUser","name","createDoc","categoriesOptions","addQuePage","addQ","submitQue","createQue","clearPanels","filteredQuestions","filteredDocs","showSearchDropDown","curSelSearchKw","$digest","clickSearch","keywordBackup","keyword","doSearch","focusSearch","signal","op","curSelSearchTitle","document","getElementById","ori","style","backgroundColor","text","mouseEnterSearch","val","mouseLeaveSearch","$watch","searchTitle","selector","getDocTitleByKeyword","findedTile","getQueTitleByKeyword","currentPage","getQuesByKeyword","questions","showAnswer","totalItems","length","updateQueList","getDocByKeyword","docs","updateDocList","toFocus","findAllLogs","getAllLogs","logs","deleteAllLogs","getDocCounts","docNums","getQueCounts","queNums","getAllUsers","users","deleteUser","service","$http","$q","saveToken","token","localStorage","getToken","payload","split","atob","JSON","parse","exp","now","post","success","logout","removeItem","serverUrl","auth","headers","Authorization","get","getUserById","newUser","updateUser","put","getQuesByCategory","getQueById","getQueCategories","newQuestion","updateQue","updateQuestion","deleteQue","getDocById","getDocCategories","getDocByCategory","doc","updateDoc","deleteDoc","cat","getLogsByIp","ip","getLogsByDate","date","getRelatedByKeyword","p","Promise","resolve","reject","all","numPerPage","questionId","subCategory","getQuestionById","updateQuePage","question","isUpdateQuestion","questionBackup","copy","begin","end","slice","changed","cancelUpdateQue","keys","property","deleteQuestion","_id","require","model","docId","doDeepCopy","backupDoc","resetUpdateDoc","isUpdateDoc","setTimeout","updateDocPage","isActive","viewLocation","indexOf","removeCurSelRelated","index","splice","addThisRelated","thisRelated","i","title","searchRelatedKeyword","relateds","object","obj"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n  angular.module('app', ['ui.router', 'ngAnimate', 'ui.bootstrap', 'ngSanitize', 'ui.tinymce'])\n  .config(['$stateProvider', '$locationProvider', '$urlRouterProvider',\n    function ($stateProvider, $locationProvider, $urlRouterProvider) {\n      $stateProvider\n        .state('root', {\n          url: '/',\n          templateUrl: '/home/home.view.html',\n          controller: \"homeCtrl\"\n        })\n        .state('login/register', {\n          url: '/login', // can't named \"auth\"\n          templateUrl: \"/auth/auth.view.html\",\n          controller: \"loginCtrl\"\n        })\n        .state('dataNav', {\n          url: '/nav/:group',\n          templateUrl: \"/data_nav/data.nav.view.html\",\n          controller: \"dataNavCtrl\"\n        })\n        .state('documentsByCategory', {\n          url: '/doc/:mainCategory/:category',\n          templateUrl: \"/document/document.view.html\",\n          controller: \"docCtrl\"\n        })\n        .state('specific_document', {\n          url: '/doc?id',\n          templateUrl: \"/document/document.view.html\",\n          controller: \"docCtrl\"\n        })\n        .state('questionByCategory', {\n          url: '/que/:mainCategory/:category',\n          templateUrl: \"/question/question.view.html\",\n          controller: \"queCtrl\"\n        })\n        .state('specific_question', {\n          url: '/que?id',\n          templateUrl: \"/question/question.view.html\",\n          controller: \"queCtrl\"\n        })\n        .state('admin', {\n          url: '/admin/',\n          templateUrl: \"/admin/admin.view.html\",\n          controller: \"adminCtrl\"\n        })\n        .state('admin.overviews', {\n          url: 'overviews/',\n          templateUrl: \"/admin/overviews/admin.overviews.view.html\",\n          controller: \"adminOverviewsCtrl\"\n        })\n        .state('admin.users', {\n          url: 'users/',\n          templateUrl: \"/admin/users/admin.users.view.html\",\n          controller: \"adminUsersCtrl\"\n        })\n        .state('admin.access', {\n          url: 'access/',\n          templateUrl: \"/admin/access/admin.access.view.html\",\n          controller: \"adminAccessCtrl\"\n        })\n        .state('admin.source', {\n          url: 'source/',\n          templateUrl: \"/admin/source/admin.source.view.html\",\n          controller: \"adminSourceCtrl\"\n        })\n\n        $urlRouterProvider.otherwise('/');\n\n      $locationProvider.html5Mode(true);\n\n  }]).controller('footerCtrl', ['$scope', function ($scope) {\n    $scope.year = new Date().getFullYear();\n  }]).controller('mainCtrl', ['$scope', '$rootScope', function($scope, $rootScope){\n    $rootScope.prismHighlight = function(){\n      Prism.highlightAll();\n    };\n\n    $rootScope.tinymceUsage = {\n\t  setup: function(editor){\n\t\t  editor.on('keydown', function(event){\n\t\t\t if(event.keyCode == 9){\n\t\t\t\t if(event.shiftKey){\n\t\t\t\t\t editor.execCommand('Outdent');\n\t\t\t\t }else{\n\t\t\t\t\t editor.execCommand('Indent');\n\t\t\t\t }\n\t\t\t\t event.preventDefault();\n\t\t\t\t return false;\n\t\t\t } \n\t\t  });\n\t  },\n      height: 250,\n      plugins: 'link image codesample advlist code preview',\n      toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | codesample | link image',\n      valid_elements : '*[*]'\n    };\n    $rootScope.$on('onFinishRepeat', function(evt){\n      $scope.prismHighlight();\n    });\n    \n  }]).directive('onFinishRepeat', ['$timeout', function($timeout){\n    return {\n      restrict: 'A',\n      link: function(scope, element, attr){\n        if(scope.$last === true){\n          $timeout(function(){\n            scope.$emit(attr.onFinishRepeat);\n          });\n        }\n      }\n    }\n  }]).directive('subCatCounts', function(){\n    return function(scope, element, attrs){\n      if(scope.group == 'doc'){\n        scope.meanData.getDocCountsByCategory(attrs.subCatCounts)\n                          .then(function(result){\n          element.html(result.data);\n        });\n      }\n      if(scope.group == 'que'){\n        scope.meanData.getQueCountsByCategory(attrs.subCatCounts)\n                          .then(function(result){\n          element.html(result.data);\n        });\n      }\n    };\n  });\n})();\n(function(){\r\n\tvar app = angular.module('app');\r\n\tapp.controller('adminCtrl', [\"$scope\", function($scope){\r\n\r\n\t}]);\r\n})();\n(function () {\n  angular.module('app')\n    .controller('loginCtrl', ['$scope', 'authentication', 'meanData', '$window','$rootScope', \n      function ($scope, authentication, meanData, $window, $rootScope) {\n\n      $scope.error = false;\n\n      $scope.login = function () {\n        authentication.login($scope.user)\n          .error(function () {\n            $scope.error = true;\n          })\n          .then(function () {\n            window.location.href = \"/\";\n          })\n      };\n\n      $scope.register = function () {\n        meanData.createUser($scope.userr).then(function (res) {\n          alert(res.data.message);\n          $scope.user = $scope.userr;\n          $scope.login();\n        },function(err){\n          alert(err.statusText);\n        })\n      };\n\n    }])\n})();\n(function () {\r\n  angular.module('app').controller('dataNavCtrl', ['$scope', 'meanData', 'authentication', '$location', '$sce', '$stateParams', '$state',\r\n    function ($scope, meanData, authentication, $location, $sce, $stateParams, $state) {\r\n        \r\n        $scope.meanData = meanData;\r\n        $scope.isLoggedIn = authentication.isLoggedIn();\r\n\r\n        $scope.group = $stateParams.group;\r\n\r\n        if($scope.group == 'doc'){\r\n          $scope.navTitle = \"Documents\"\r\n        }\r\n        if($scope.group == 'que'){\r\n          $scope.navTitle = \"Questions Set\"\r\n        }\r\n\r\n        $scope.getCategories = function(){\r\n          meanData.getCategoriesByGroup($scope.group).then(function(data){\r\n            $scope.mainCategories = data.data;\r\n          }, function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.submitCat = function(){\r\n          $scope.addCat.group = $scope.group;\r\n          meanData.createCategory($scope.addCat).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          }, function(err){\r\n            console.log(err);\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.goToSubCatPage = function(mainCategory,category){\r\n          $location.path(\"/\"+$scope.group+\"/\"+mainCategory+\"/\"+category);\r\n        };\r\n\r\n        $scope.updateCategory = function(uCat){\r\n          meanData.updateCategory(uCat).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          },function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.deleteCategory = function(id){\r\n          meanData.deleteCategory(id).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          },function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n    }]);\r\n})();\n(function () {\r\n  angular.module('app').controller('docCtrl', ['$scope', 'meanData', 'authentication', '$location', \r\n    '$state', '$stateParams', function ($scope, meanData, \r\n      authentication, $location, $state, $stateParams) {\r\n        \r\n        $scope.hostName = $location.protocol() + \"://\" + location.host;\r\n\r\n        $scope.isLoggedIn = authentication.isLoggedIn();\r\n\r\n        $scope.goToDataNav = function(){\r\n          $location.path(\"/nav/doc\");\r\n        };\r\n\r\n        $scope.cancelAddDoc = function(){\r\n          if(confirm(\"Are you sure to discard the create?\")){\r\n            // from related directive\r\n            $scope.selRelateds = null;\r\n            $scope.addD = null;\r\n          }\r\n        }\r\n\r\n        $scope.addDocPage = function(){\r\n          $scope.addD = new Object();\r\n          $scope.showAdd=true;\r\n          $scope.addD.category=$stateParams.category;\r\n          // category directive\r\n          $scope.showCategories('doc');\r\n          $scope.categorySetter($scope.addD.category);\r\n          $scope.selRelateds = [];\r\n        }\r\n\r\n      \t$scope.submitDoc = function(){\r\n          if($scope.addD){\r\n            $scope.addD.related = [];\r\n            $scope.addD.category = $scope.categorModel_;\r\n            // from related directive\r\n            $scope.selRelateds.forEach(function(elem){\r\n              $scope.addD.related.push(elem);\r\n            });\r\n\r\n            $scope.addD.author = authentication.currentUser().name;\r\n\r\n            meanData.createDoc($scope.addD).then(function (res) {\r\n              alert(res.data.message);\r\n              $state.reload();\r\n              }, function(err){\r\n              alert(err.data.message);\r\n            });\r\n          }\r\n      \t};\r\n    }]);\r\n})();\n(function () {\r\n  angular.module('app').controller('queCtrl', ['$scope', 'meanData', 'authentication', '$location', \r\n    '$stateParams', '$state', function ($scope, meanData, authentication, $location, $stateParams, \r\n      $state) {\r\n      \r\n        $scope.hostName = $location.protocol() + \"://\" + location.host;\r\n\r\n        $scope.isLoggedIn = authentication.isLoggedIn();\r\n        \r\n        $scope.showCategories = function(){\r\n          meanData.getCategoriesByGroup('que').then(function(res){\r\n            $scope.categoriesOptions = res.data;\r\n          });\r\n        };\r\n\r\n        $scope.goToDataNav = function(){\r\n          $location.path(\"/nav/que\");\r\n        };\r\n\r\n        $scope.addQuePage = function(){\r\n          $scope.addQ = new Object();\r\n          $scope.showAdd=true;\r\n          $scope.showCategories('que');\r\n          $scope.addQ.category = $stateParams.category;\r\n          $scope.categorySetter($scope.addQ.category);\r\n          $scope.selRelateds = [];\r\n        }\r\n\r\n        $scope.submitQue = function(){\r\n          if($scope.addQ){\r\n            $scope.addQ.related = [];\r\n            $scope.selRelateds.forEach(function(elem){\r\n              $scope.addQ.related.push(elem);\r\n            });\r\n            $scope.addQ.category = $scope.categorModel_;\r\n            $scope.addQ.author = authentication.currentUser().name;\r\n\r\n            meanData.createQue($scope.addQ).then(function (res) {\r\n              alert(res.data.message);\r\n              $state.reload();\r\n              }, function(err){\r\n              alert(err.data.message);\r\n            });\r\n          }\r\n        };\r\n    }]);\r\n})();\n(function () {\n  angular.module('app').controller('homeCtrl', ['$scope', '$window', '$location', 'meanData', 'authentication',\n    function ($scope, $window, $location, meanData, authentication) {\n\n      $scope.showSearchDropDown = false;\n      $scope.curSelSearchKw = -1;\n      $scope.isLoggedIn = authentication.isLoggedIn();\n\n      $scope.hostName = $location.protocol() + \"://\" + location.host;\n\n      angular.element($window).on('click', function(){\n        $scope.showSearchDropDown = false;\n        $scope.$digest();\n      });\n\n      $scope.clickSearch = function(){\n        $scope.keywordBackup = $scope.keyword;\n        $scope.$digest();\n        $scope.doSearch(0);\n      }\n      \n      $scope.focusSearch = function(signal){\n        var op = $scope.curSelSearchKw*1 + signal*1;\n        var curSelSearchTitle = document.getElementById(\"search-\" + op);\n        if(curSelSearchTitle){\n          var ori = document.getElementById(\"search-\" + $scope.curSelSearchKw);\n          if(ori){ ori.style.backgroundColor = null; }\n          curSelSearchTitle.style.backgroundColor = \"#ccc\";\n\n          $scope.curSelSearchKw = $scope.curSelSearchKw*1 + signal*1;\n          $scope.keyword = curSelSearchTitle.text;\n          $scope.keywordBackup = curSelSearchTitle.text;\n          $scope.$digest();\n        }\n      }\n\n      $scope.mouseEnterSearch = function(val){\n        $scope.keyword = val;\n        $scope.$digest();\n      }\n\n      $scope.mouseLeaveSearch = function(){\n        $scope.keyword = $scope.keywordBackup;\n        $scope.$digest();\n      }\n\n      function clearPanels(){\n        $scope.filteredQuestions = null;\n        $scope.filteredDocs = null;\n      }\n\n      $scope.$watch('selector', function(){\n        $scope.keyword = \"\";\n        clearPanels();\n      });\n\n      $scope.searchTitle = function(){\n        if($scope.keyword){\n          $scope.showSearchDropDown = true;\n          $scope.curSelSearchKw = -1;\n          $scope.keywordBackup = $scope.keyword;\n\n          if($scope.selector == 'Doc'){\n            meanData.getDocTitleByKeyword($scope.keyword).then(function(res){\n              $scope.findedTile = res.data;\n            });\n          }\n          if($scope.selector == 'Quiz'){\n            meanData.getQueTitleByKeyword($scope.keyword).then(function(res){\n              $scope.findedTile = res.data;\n            });\n          }\n        }else{\n          $scope.showSearchDropDown = false;\n        }\n      };\n      /* signal: 1-> if I enter the search keyword, then need to check whether is specific \n                  0-> because I select a specific keytitle, so is already specific\n      */\n      $scope.doSearch = function(signal){\n        if($scope.keyword && $scope.selector){\n          $scope.showSearchDropDown = false;\n          $scope.currentPage = 1;\n          if($scope.selector == 'Quiz'){\n            meanData.getQuesByKeyword($scope.keyword).then(function (res){\n              $scope.questions = res.data;\n              if((signal == 1 && $scope.curSelSearchKw != -1) || signal == 0){ \n                $scope.questions[0].showAnswer= true; \n              }\n              $scope.totalItems = res.data.length;\n              $scope.updateQueList();\n            });\n          }\n          if($scope.selector == 'Doc'){\n            meanData.getDocByKeyword($scope.keyword).then(function (res){\n              $scope.docs = res.data;\n              if(signal == 1 && $scope.curSelSearchKw != -1 || signal == 0){ \n                $scope.docs[0].showAnswer= true; \n              }\n              $scope.totalItems = res.data.length;\n              $scope.updateDocList();\n            });\n          }\n        }else{clearPanels();}\n      };\n      \n    }]);\n  angular.module('app').directive('toFocus', function(){\n    return {\n      scope: false,\n      restrict: \"A\",\n      link: function(scope, elem, attr){\n        elem.on('click', function(){\n          scope.clickSearch();\n        });\n        elem.on('mouseenter', function(evt){\n          scope.mouseEnterSearch(attr.toFocus, evt);\n        });\n        elem.on('mouseleave', function(evt){\n          scope.mouseLeaveSearch(evt);\n        });\n      }\n    }\n  });\n  angular.module('app').directive('searchFocus', function(){\n    return {\n      scope: false,\n      restrict: \"A\",\n      link: function(scope, elem, attr){\n        elem.on('keydown', function(evt){\n          if(evt.keyCode == 13){\n            scope.doSearch(1);\n          }\n          if(evt.keyCode == 40 || evt.keyCode == 38){\n            if(scope.showSearchDropDown){\n              evt.preventDefault();\n              if(evt.keyCode == 40){\n                scope.focusSearch(1);\n              }else{\n                scope.focusSearch(-1);\n              }\n            }\n          }\n        });\n      }\n    }\n  });\n})();\n(function(){\r\n\tangular.module('app').controller('adminAccessCtrl', ['$scope', 'meanData', \r\n\t\t'$state', function($scope, meanData, $state){\r\n\r\n\t\t$scope.findAllLogs = function(){\r\n\t\t\tmeanData.getAllLogs().then(function(data){\r\n\t\t\t\t$scope.logs = data.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteAllLogs = function(){\r\n\t\t\tmeanData.deleteAllLogs().then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\t$state.reload();\r\n\t\t\t});\r\n\t\t}\r\n\t}])\r\n})();\n(function(){\r\n\tangular.module('app').controller('adminOverviewsCtrl', ['$scope', \r\n\t\t'meanData', function($scope, meanData){\r\n\r\n\t\t$scope.getDocCounts = function(){\r\n\t\t\tmeanData.getDocCounts().then(function(res){\r\n\t\t\t\t$scope.docNums = res.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.getQueCounts = function(){\r\n\t\t\tmeanData.getQueCounts().then(function(res){\r\n\t\t\t\t$scope.queNums = res.data;\r\n\t\t\t});\r\n\t\t}\r\n\t}])\r\n})();\n(function(){\r\n\tangular.module('app').controller('adminSourceCtrl', ['$scope', \r\n\t\tfunction($scope){\r\n\t\t\t\r\n\t}])\r\n})();\n(function(){\r\n\tangular.module('app').controller('adminUsersCtrl', ['$scope', 'meanData',\r\n\t\tfunction($scope, meanData){\r\n\t\t\r\n\t\tmeanData.getAllUsers().then(function(res){\r\n\t\t\t$scope.users = res.data;\r\n\t\t});\r\n\r\n\t\t$scope.deleteUser = function(id){\r\n\t\t\tif(confirm(\"Are you sure to delete?\")){\r\n\t\t\t\tmeanData.deleteUser(id).then(function(res){\r\n\t\t\t\t\talert(res.message);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}])\r\n})();\n(function () {\n  angular.module('app').service('authentication', ['$http', '$window', '$q',\n   function ($http, $window, $q) {\n\n    var saveToken = function (token) {\n      $window.localStorage['mean-token'] = token;\n    };\n\n    var getToken = function () {\n      return $window.localStorage['mean-token'];\n    };\n\n    var isLoggedIn = function () {\n      var token = getToken();\n      var payload;\n\n      if(token){\n        payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n\n        return payload.exp > Date.now() / 1000;\n      } else {\n        return false;\n      }\n    };\n\n    var currentUser = function() {\n      if(isLoggedIn()){\n        var token = getToken();\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        return payload;\n      }\n    };\n\n    var login = function (user) {\n      return $http.post('/api/login', user).success(function (data) {\n        saveToken(data.token);\n      })\n    };\n\n    var logout = function () {\n      $window.localStorage.removeItem('mean-token');\n    };\n\n    return {\n      login: login,\n      isLoggedIn: isLoggedIn,\n      currentUser: currentUser,\n      logout: logout,\n      getToken: getToken,\n      saveToken: saveToken,\n\n    }\n\n  }])\n  \n})();\n(function () {\n  angular.module('app').service('meanData', ['$http', '$q', 'authentication',\n   function meanData($http, $q, authentication) {\n    var serverUrl = \"/api\";\n    var auth = {\n        headers: {\n          Authorization: 'Bearer ' + authentication.getToken()\n        }\n    };\n    /***** User *****/\n\n    var getAllUsers = function () {\n      return $http.get(serverUrl + '/user');\n    };\n\n    var getUserById = function (id) {\n      return $http.get(serverUrl + '/user/' + id);\n    };\n\n    var createUser = function (newUser) {\n      return $http.post(serverUrl + '/user', newUser, auth);\n    };\n\n    var updateUser = function (updateUser) {\n      return $http.put(serverUrl + '/user', updateUser, auth);\n    };\n\n    var deleteUser = function (id) {\n      return $http.delete(serverUrl + '/user?id=' + id, auth);\n    };\n\n    /***** Question *****/\n\n    var getQuesByCategory = function(category){\n      return $http.get(serverUrl + '/que/c/' + category); \n    };\n\n    var getQueById = function(id){\n      return $http.get(serverUrl + '/que/id/' + id); \n    };\n\n    var getQueCategories = function(){\n      return $http.get(serverUrl + '/que/c');\n    };\n\n    var createQue = function (newQuestion) {\n      return $http.post(serverUrl + '/que', newQuestion, auth);\n    };\n\n    var updateQue = function (updateQuestion) {\n      return $http.put(serverUrl + '/que', updateQuestion, auth);\n    };\n\n    var deleteQue = function (id) {\n      return $http.delete(serverUrl + '/que/id/' + id, auth);\n    };\n\n    var getQueTitleByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/q/' + keyword + \"?need=title\"); \n    };\n\n    var getQuesByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/q/' + keyword + \"?need=\"); \n    };\n\n    /***** Document *****/\n\n    var getDocById = function(id){\n      return $http.get(serverUrl + '/doc/id/' + id);\n    };\n\n    var getDocCategories = function(){\n      return $http.get(serverUrl + '/doc/c');\n    };\n\n    var getDocByCategory = function(category){\n      return $http.get(serverUrl + '/doc/c/' + category);\n    };\n\n    var createDoc = function(doc){\n      return $http.post(serverUrl + '/doc', doc, auth);\n    };\n\n    var updateDoc = function(doc){\n      return $http.put(serverUrl + '/doc', doc, auth);\n    };\n\n    var deleteDoc = function(id){\n      return $http.delete(serverUrl + '/doc/id/' + id, auth);\n    }\n\n    var getDocTitleByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/d/' + keyword + \"?need=title\");\n    }\n\n    var getDocByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/d/' + keyword + \"?need=\");\n    }\n\n    /***** Category *****/\n    var getCategories = function(){\n      return $http.get(serverUrl + '/cat');\n    }\n\n    var getCategoriesByGroup = function(group){\n      return $http.get(serverUrl + '/cat/' + group);\n    }\n\n    var createCategory = function(cat){\n      return $http.post(serverUrl + '/cat', cat, auth);\n    }\n\n    var updateCategory = function(cat){\n      return $http.put(serverUrl + '/cat', cat, auth);\n    }\n\n    var deleteCategory = function(id){\n      return $http.delete(serverUrl + '/cat/id/' + id, auth);\n    }\n\n    /***** Log *****/\n    var getAllLogs = function(){\n      return $http.get(serverUrl + '/log', auth);\n    }\n\n    var getLogsByIp = function(ip){\n      return $http.get(serverUrl + '/log?ip=' + ip, auth)\n    }\n\n    var getLogsByDate = function(date){\n      return $http.get(serverUrl + '/log?date=' + date, auth);\n    }\n\n    var deleteAllLogs = function(){\n      return $http.delete(serverUrl + '/log', auth);\n    }\n\n    /***** Count *****/\n    var getDocCountsByCategory = function(category){\n      return $http.get(serverUrl + '/count/doc/' + category);\n    }\n\n    var getQueCountsByCategory = function(category){\n      return $http.get(serverUrl + '/count/que/' + category);\n    }\n\n    var getDocCounts = function(){\n      return $http.get(serverUrl + '/count/doc');\n    }\n\n    var getQueCounts = function(){\n      return $http.get(serverUrl + '/count/que');\n    }\n\n    var getRelatedByKeyword = function(keyword){\n      var p =new Promise(function(resolve, reject){\n        $q.all([\n          $http.get(serverUrl + '/s/d/' + keyword + \"?need=title+group\"),\n          $http.get(serverUrl + '/s/q/' + keyword + \"?need=title+group\")\n        ]).then(function(res){\n          resolve(res);\n        });\n      });\n      return p;\n    }\n\n    return {\n      getAllUsers: getAllUsers,\n      createUser: createUser,\n      updateUser: updateUser,\n      deleteUser: deleteUser,\n      getUserById: getUserById,\n\n      getQueById: getQueById,\n      getQueCategories: getQueCategories,\n      getQuesByCategory: getQuesByCategory,\n      createQue: createQue,\n      updateQue: updateQue,\n      deleteQue: deleteQue,\n\n      getDocById: getDocById,\n      getDocCategories: getDocCategories,\n      getDocByCategory: getDocByCategory,\n      createDoc: createDoc,\n      updateDoc: updateDoc,\n      deleteDoc: deleteDoc,\n\n      getCategories: getCategories,\n      getCategoriesByGroup: getCategoriesByGroup,\n      createCategory: createCategory,\n      updateCategory: updateCategory,\n      deleteCategory: deleteCategory,\n\n      getQueTitleByKeyword: getQueTitleByKeyword,\n      getDocTitleByKeyword: getDocTitleByKeyword,\n      getQuesByKeyword: getQuesByKeyword,\n      getDocByKeyword: getDocByKeyword,\n      getRelatedByKeyword: getRelatedByKeyword,\n\n      getAllLogs: getAllLogs,\n      getLogsByIp: getLogsByIp,\n      getLogsByDate: getLogsByDate,\n      deleteAllLogs: deleteAllLogs,\n\n      getDocCountsByCategory: getDocCountsByCategory,\n      getQueCountsByCategory: getQueCountsByCategory,\n      getDocCounts: getDocCounts,\n      getQueCounts: getQueCounts\n    }\n  }])\n})();\n(function () {\n\tangular.module('app').directive('listQue', ['meanData', '$stateParams','authentication', '$state',\n\t\tfunction (meanData, $stateParams, authentication, $state) {\n\t\treturn {\n\t\t\tscope: false,\n      \t\trestrict: 'E',\n      \t\ttemplateUrl: '/common/directives/list-question/list-question.view.html',\n      \t\tlink: function(scope, element, attr){\n\n      \t\t\tscope.numPerPage = 5;\n\n      \t\t\tscope.questionId = $stateParams.id;\n      \t\t\tscope.subCategory = $stateParams.category;\n\n      \t\t\t// receive question id\n\t\t        if(scope.questionId){\n\t\t    \t      meanData.getQuestionById(scope.questionId).then(function(res){\n\t\t          \t\tscope.filteredQuestions = [res.data];\n\t\t          \t\tscope.showAnswer = !scope.showAnswer;\n\t\t          });\n\t\t        } else {\n\t\t        \tif(scope.subCategory){\n\t\t        \t\tmeanData.getQuesByCategory(scope.subCategory).then(function (data) {\n\t\t\t                scope.questions = data.data;\n\t\t\t                scope.totalItems = data.data.length;\n\t\t\t                scope.currentPage = 1;\n\t\t\t                scope.updateQueList();\n\t\t\t            });\n\t\t        \t}\n\t\t        \t\n\t\t        }\n\n\t\t        scope.updateQuePage = function(question){\n\t\t        \tquestion.isUpdateQuestion=true;\n\t\t        \tquestion.showAnswer=true;\n\t\t        \t// category directive\n\t\t        \tscope.showCategories(question.group);\n\t\t        \tscope.categorySetter(question.category);\n\t\t        \t// related directive\n\t\t        \tscope.selRelateds=question.related;\n\n\t\t        \tscope.questionBackup = angular.copy(question);\n\t\t        }\n\n\t\t\t\tscope.updateQueList = function(){\n\t\t\t\t\tvar begin = (scope.currentPage - 1) * scope.numPerPage;\n\t\t\t\t\tvar end = begin + scope.numPerPage;\n\t\t\t\t\tif(scope.questions){\n\t\t\t\t  \t\tscope.filteredQuestions = scope.questions.slice(begin, end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t    scope.$watch('currentPage + numPerPage', scope.updateQueList);\n\n\t\t\t    scope.updateQuestion = function(question, selRelateds, categorModel_){\n\t\t\t    \tif(confirm(\"Are you sure to update?\")){\n\t\t\t    \t\tvar changed = (categorModel_ == question.category ? false : true);\n\t\t\t    \t\tquestion.category = categorModel_;\n\t\t\t\t        question.author = authentication.currentUser().name;\n\t\t\t\t        question.related = [];\n\t\t          \t\tselRelateds.forEach(function(elem){\n\t\t\t            \tquestion.related.push(elem);\n\t\t\t          \t});\n\t\t\t\t        \n\t              \t\tmeanData.updateQue(question).then(function(res){\n\t\t\t\t\t\t\talert(res.data.message);\n\t\t\t\t\t\t\tif(changed)\n\t\t\t\t\t\t\t\treturn $state.reload();\n\t\t\t\t\t\t\tquestion.isUpdateQuestion = false;\n\t\t\t\t\t\t}, function(res){\n\t\t\t\t\t\t\talert(res.statusText);\n\t\t\t\t\t\t});\n\t\t\t    \t}\n\t\t\t\t};\n\n\t\t\t\tscope.cancelUpdateQue = function(question){\n\t\t\t\t\tif(confirm(\"Are you sure to discards update?\")){\n\t\t\t\t\t\tObject.keys(question).forEach(function(property){\n\t\t\t          \t\tquestion[property] = scope.questionBackup[property];\n\t\t\t          \t});\n\t\t\t\t\t\tquestion.isUpdateQuestion=false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tscope.deleteQuestion = function(question){\n\t\t\t\t\tif(confirm(\"Are you sure to delete this question?\")){\n\t\t\t\t\t\tmeanData.deleteQue(question._id).then(function(res){\n\t\t\t\t\t\t\talert(res.data.message);\n\t\t\t\t\t\t\t$state.reload();\n\t\t\t\t\t\t},function(res){\n\t\t\t\t\t\t\talert(res.statusText);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n      \t\t}\n    \t}\n  \t}]);\n})();\n(function(){\r\n\tangular.module('app').directive('category', ['meanData', \r\n\t\t\t\tfunction(meanData){\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n      \t\trequire: '?ngModel',\r\n\t\t\tscope: false,\r\n      \t\ttemplateUrl: '/common/directives/category/category.view.html',\r\n      \t\tlink: function(scope, element, attr){\r\n      \t\t\t\r\n      \t\t\tscope.categorySetter = function(model){\r\n      \t\t\t\tscope.categorModel_ = model;\r\n      \t\t\t};\r\n\r\n      \t\t\tscope.showCategories = function(group){\r\n\t\t          meanData.getCategoriesByGroup(group).then(function(res){\r\n\t\t            scope.categoriesOptions = res.data;\r\n\t\t          });\r\n\t\t        };\r\n      \t\t}\r\n\t\t}\r\n\t}]);\r\n})();\n(function () {\r\n\tangular.module('app').directive('listDoc', ['$stateParams', 'meanData', \r\n\t\t\t\t\t'$state', function ($stateParams, meanData, $state) {\r\n\t\treturn {\r\n      \t\trestrict: 'E',\r\n      \t\trequire: '?ngModel',\r\n\t\t\tscope: false,\r\n      \t\ttemplateUrl: '/common/directives/list-document/list-document.view.html',\r\n      \t\tlink: function(scope, element, attr){\r\n\r\n      \t\t\tscope.numPerPage = 5;\r\n\r\n\t\t        scope.docId = $stateParams.id;\r\n\t\t        scope.subCategory = $stateParams.category;\r\n\t\t        scope.mainCategory = $stateParams.mainCategory;\r\n\r\n      \t\t\tif(scope.docId){\r\n      \t\t\t\tmeanData.getDocById(scope.docId).then(function(res){\r\n      \t\t\t\t\tscope.filteredDocs = [res.data];\r\n      \t\t\t\t\tscope.filteredDocs[0].showAnswer = true;\r\n      \t\t\t\t});\r\n      \t\t\t} else {\r\n      \t\t\t\tif(scope.subCategory){\r\n      \t\t\t\t\tmeanData.getDocByCategory(scope.subCategory).then(function (data) {\r\n\t\t\t                scope.docs = data.data;\r\n\t\t\t                scope.totalItems = data.data.length;\r\n\t\t\t                scope.currentPage = 1;\r\n\t\t\t                scope.updateDocList();\r\n\t\t\t            });\r\n      \t\t\t\t}\r\n\t\t    \t}\r\n\r\n      \t\t\tscope.doDeepCopy = function(doc){\r\n      \t\t\t\tscope.backupDoc = angular.copy(doc);\r\n      \t\t\t}\r\n\r\n\t\t\t\tscope.updateDocList = function(){\r\n\t\t\t\t\tvar begin = (scope.currentPage - 1) * scope.numPerPage;\r\n\t\t\t\t\tvar end = begin + scope.numPerPage;\r\n\t\t\t\t\tif(scope.docs){\r\n\t\t\t\t  \t\tscope.filteredDocs = scope.docs.slice(begin, end);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t    scope.$watch(\"currentPage + numPerPage\", scope.updateDocList);\r\n\r\n\t\t        scope.resetUpdateDoc = function(doc){\r\n\t\t          if(confirm(\"Are you sure to discard your records?\")){\r\n\t\t          \tscope.backupDoc.isUpdateDoc = false;\r\n\t\t          \t\r\n\t\t          \tObject.keys(doc).forEach(function(property){\r\n\t\t          \t\tdoc[property] = scope.backupDoc[property];\r\n\t\t          \t});\r\n\t\t          \tsetTimeout(function(){\r\n\t\t          \t\tscope.prismHighlight();\r\n\t\t          \t});\r\n\r\n\t\t          \tdoc.showAnswer = true;\r\n\t\t          }\r\n\t\t        }\r\n\t\t        \r\n\t\t        scope.updateDocPage = function(doc){\r\n\t\t        \tdoc.isUpdateDoc=true;\r\n\t\t        \tscope.doDeepCopy(doc);\r\n\t\t        \t// category directive\r\n\t\t        \tscope.showCategories(doc.group);\r\n\t\t        \tscope.categorySetter(doc.category);\r\n\t\t        \t// related directive\r\n\t\t        \tscope.selRelateds = doc.related;\r\n\t\t        }\r\n\r\n\t\t\t    scope.updateDoc = function(doc, categorModel_){\r\n\t\t\t    \tvar changed = (categorModel_ == doc.category ? false : true);\r\n\t\t\t\t\tif(confirm(\"Are you sure to make a update?\")){\r\n\t\t\t\t\t\tdoc.related = [];\r\n\t\t\t\t\t\tdoc.category = categorModel_;\r\n\t\t\t\t\t\t// related directive\r\n\t\t          \t\tscope.selRelateds.forEach(function(elem){\r\n\t\t\t            \tdoc.related.push(elem);\r\n\t\t\t          \t});\r\n\t\t\t      \t\tmeanData.updateDoc(doc).then(function (res) {\r\n\t\t\t        \t\talert(res.data.message);\r\n\t\t\t        \t\tif(changed)\r\n\t\t\t        \t\t\treturn $state.reload();\r\n\t\t\t        \t\tdoc.isUpdateDoc=false;\r\n\t\t\t        \t\tsetTimeout(function(){\r\n\t\t\t\t          \t\tscope.prismHighlight();\r\n\t\t\t\t          \t});\r\n\t\t\t      \t\t  }, function(res){\r\n\t\t\t      \t\t\talert(res.statusText);\r\n\t\t\t      \t\t});\r\n\t\t\t      \t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.deleteDoc = function(doc){\r\n\t\t\t\t\tif(confirm(\"Are you sure to delete this document?\")){\r\n\t\t\t\t\t\tmeanData.deleteDoc(doc._id).then(function(res){\r\n\t\t\t\t\t\t\talert(res.data.message);\r\n\t\t\t\t\t\t\t$state.reload();\r\n\t\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t\talert(res.statusText);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n      \t\t}\r\n    \t}\r\n  \t}]);\r\n})();\n(function () {\n  angular.module('app').directive('navigation', function () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/common/directives/navigation/navigation.view.html'\n    }\n  }).controller('navCtrl', ['$scope', '$location', 'authentication', '$state', '$window', '$rootScope',\n  function($scope, $location, authentication, $state, $window, $rootScope){\n    $scope.logout = function () {\n      authentication.logout();\n      $window.location.href = \"/\";\n    };\n    \n    // get current user\n\t  $scope.currentUser = authentication.currentUser();\n\t\n    $scope.isLoggedIn = authentication.isLoggedIn();\n    $rootScope.isActive = function(viewLocation){\n      if(viewLocation === '/')\n        return $location.path() === viewLocation;\n      return $location.path().indexOf(viewLocation) >= 0;\n    };\n  }])\n})();\n(function(){\r\n\tangular.module('app').directive('related', ['meanData',\r\n\t\t\tfunction(meanData){\r\n\t\treturn {\r\n\t\t\tscope: false,\r\n\t\t\trestrict: 'E',\r\n\t\t\ttemplateUrl: '/common/directives/related/related.view.html',\r\n\t\t\tlink: function(scope, element, attr){\r\n\t\t\t\t\r\n\t\t\t\tscope.removeCurSelRelated = function(selRelateds, index){\r\n\t\t          selRelateds.splice(index, 1);\r\n\t\t        };\r\n\r\n\t\t\t\tscope.addThisRelated = function(selRelateds, thisRelated){\r\n\t\t          if(!thisRelated)\r\n\t\t            return false;\r\n\t\t          if(selRelateds.length < 1){\r\n\t\t            selRelateds.push(thisRelated[0]);\r\n\t\t          }else{\r\n\t\t            for(var i = 0; i < selRelateds.length; i++){\r\n\t\t              if(selRelateds[i].title != thisRelated[0].title){\r\n\t\t                if(i == (selRelateds.length-1)){\r\n\t\t                  selRelateds.push(thisRelated[0]);\r\n\t\t                }\r\n\t\t              }else{\r\n\t\t                break;\r\n\t\t              }\r\n\t\t            }\r\n\t\t          }\r\n\t\t        };\r\n\r\n\t\t        scope.getRelatedByKeyword = function(searchRelatedKeyword){\r\n\t\t          if(searchRelatedKeyword){\r\n\t\t            meanData.getRelatedByKeyword(searchRelatedKeyword).then(function(data){\r\n\t\t              var relateds = [];\r\n\t\t              data.forEach(function(object){\r\n\t\t                object.data.forEach(function(obj){\r\n\t\t                  relateds.push(obj);\r\n\t\t                });\r\n\t\t              });\r\n\t\t              scope.relateds = relateds;\r\n\t\t              scope.$digest();\r\n\t\t            });\r\n\t\t          }else{\r\n\t\t          \tscope.relateds = null;\r\n\t\t          }\r\n\t\t        };\r\n\t\t\t}\r\n\t\t}\r\n\t}]);\r\n})();"]}