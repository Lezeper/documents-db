{"version":3,"sources":["app.min.js"],"names":["app","angular","module","config","$stateProvider","$locationProvider","$urlRouterProvider","state","url","templateUrl","controller","reloadOnSearch","otherwise","html5Mode","$scope","meanData","$rootScope","year","Date","getFullYear","getSettings","then","res","data","length","settings","prismHighlight","Prism","highlightAll","tinymceUsage","setup","editor","on","event","keyCode","shiftKey","execCommand","preventDefault","height","plugins","toolbar","valid_elements","$on","evt","directive","$timeout","restrict","link","scope","element","attr","$last","$emit","onFinishRepeat","attrs","group","getDocCountsByCategory","subCatCounts","result","html","getQueCountsByCategory","run","$transitions","$state","authentication","onStart","$to","name","indexOf","isLoggedIn","go","$location","$sce","$stateParams","navTitle","getCategories","getCategoriesByGroup","mainCategories","err","alert","errmsg","submitCat","addCat","createCategory","message","reload","console","log","goToSubCatPage","mainCategory","category","path","search","page","updateCategory","uCat","deleteCategory","id","$window","LoginErr","login","user","error","window","location","href","register","userr","createUser","statusText","restrcit","require","elem","ctrl","$parsers","push","val","i","containNumPattern","test","$setValidity","containCapitalPattern","clearPanels","filteredQuestions","filteredDocs","findedTile","showSearchDropDown","curSelSearchKw","inputing","hostName","protocol","host","$digest","clickSearch","keywordBackup","keyword","doSearch","setDataId","dataId","setDataGroup","dataGroup","focusSearch","signal","op","curSelSearchTitle","document","getElementById","dataset","ori","style","backgroundColor","title","mouseEnterSearch","mouseLeaveSearch","$watch","searchTitle","hightlyKeyword","selector","getDocTitleByKeyword","getQueTitleByKeyword","getRelatedByKeyword","results","forEach","object","obj","currentPage","getQueById","showAnswer","updateQueList","getQuesByKeyword","getDocById","updateDocList","getDocByKeyword","clearQueList","clearDocList","filter","t","k","addStrong","index","temp","substring","split","str","getHistory","history","subCategory","numPerPage","totalItems","selectedPage","goToDataNav","$broadcast","dateSortOption","service","$http","$q","saveToken","token","localStorage","getToken","payload","atob","JSON","parse","exp","now","currentUser","post","success","logout","removeItem","serverUrl","auth","headers","Authorization","getAllUsers","get","getUserById","newUser","updateUser","put","deleteUser","getQuesByCategory","getQuesByCategoryAndPage","num","getQueCategories","createQue","newQuestion","updateQue","updateQuestion","deleteQue","getDocCategories","getDocByCategory","getDocByCategoryAndPage","createDoc","doc","updateDoc","deleteDoc","cat","getAllLogs","getLogsByIp","ip","getLogsByDate","date","deleteAllLogs","doDBBackup","updateSettings","deleteSettings","getDocCounts","getQueCounts","getQueCountsByAnswer","answer","getAllUserRequests","sendUserRequest","req","deleteUserRequest","p","Promise","resolve","reject","all","docNums","queNums","getQueNullCounts","nullQueNums","findAllLogs","logs","doGenerate","mg","requests","deleteRequest","backupDB","users","confirm","addDocPage","addD","Object","showAdd","toLowerCase","showCategories","categorySetter","selRelateds","cancelAddDoc","submitDoc","related","categorModel_","author","categoriesOptions","goToQueNav","addQuePage","addQ","submitQue","unknownCompany","company","docId","changePage","begin","end","docs","slice","goToDocNav","doDeepCopy","backupDoc","copy","reverse","resetUpdateDoc","isUpdateDoc","keys","property","setTimeout","updateDocPage","changed","_id","questionId","questions","orderByDate","item","parts","created","number","parseInt","sendRequest","que","showCorrect","updateQuePage","question","isUpdateQuestion","questionBackup","cancelUpdateQue","deleteQuestion","model","isActive","viewLocation","removeCurSelRelated","splice","addThisRelated","thisRelated","searchRelatedKeyword","relateds"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n  var app = angular.module('app', ['ui.router', 'ngAnimate', 'ui.bootstrap',\n                         'ngSanitize', 'ui.tinymce', 'ngclipboard', 'ngMessages']);\n  \n  app.config(['$stateProvider', '$locationProvider', '$urlRouterProvider',\n    function ($stateProvider, $locationProvider, $urlRouterProvider) {\n      $stateProvider\n        .state('root', {\n          url: '/',\n          templateUrl: '/home/home.view.html',\n          controller: \"homeCtrl\"\n        })\n        .state('login', {\n          url: '/login', // can't named \"auth\"\n          templateUrl: \"/auth/auth.view.html\",\n          controller: \"authCtrl\"\n        })\n        .state('history', {\n          url: '/version_history',\n          templateUrl: \"/history/history.view.html\",\n          controller: 'historyCtrl'\n        })\n        .state('dataNav', {\n          url: '/nav/:group',\n          templateUrl: \"/data-nav/data-nav.view.html\",\n          controller: \"dataNavCtrl\"\n        })\n        .state('listContainer', {\n          url: '/lc',\n          templateUrl: '/list-container/list-container.view.html',\n          controller: \"listContainerCtrl\"\n        })\n        .state('listContainer.doc', {\n          url: '/doc/:mainCategory/:category?page',\n          templateUrl: \"/document/document.view.html\",\n          reloadOnSearch: false\n        })\n        .state('specific_document', {\n          url: '/doc?id',\n          templateUrl: \"/document/document.view.html\"\n        })\n        .state('listContainer.que', {\n          url: '/que/:mainCategory/:category?page',\n          templateUrl: \"/question/question.view.html\",\n          reloadOnSearch: false\n        })\n        .state('specific_question', {\n          url: '/que?id',\n          templateUrl: \"/question/question.view.html\"\n        })\n        .state('admin', {\n          url: '/admin/',\n          templateUrl: \"/admin/admin.view.html\",\n          controller: \"adminCtrl\"\n        })\n        .state('admin.overviews', {\n          url: 'overviews/',\n          templateUrl: \"/admin/overviews/admin.overviews.view.html\",\n          controller: \"adminOverviewsCtrl\"\n        })\n        .state('admin.users', {\n          url: 'users/',\n          templateUrl: \"/admin/users/admin.users.view.html\",\n          controller: \"adminUsersCtrl\"\n        })\n        .state('admin.access', {\n          url: 'access/',\n          templateUrl: \"/admin/access/admin.access.view.html\",\n          controller: \"adminAccessCtrl\"\n        })\n        .state('admin.settings', {\n          url: 'settings/',\n          templateUrl: \"/admin/settings/admin.settings.view.html\",\n          controller: \"adminSettingsCtrl\"\n        })\n        .state('admin.mg', {\n          url: 'mg/',\n          templateUrl: \"/admin/mg/admin.mg.view.html\",\n          controller: \"adminMgCtrl\"\n        })\n        .state('admin.request', {\n          url: 'request/',\n          templateUrl: \"/admin/request/admin.req.view.html\",\n          controller: \"userReqCtrl\"\n        })\n\n        $urlRouterProvider.otherwise('/');\n\n      $locationProvider.html5Mode(true);\n\n  }]);\n\n  app.controller('footerCtrl', ['$scope', 'meanData', '$rootScope',\n        function ($scope, meanData, $rootScope) {\n    $scope.year = new Date().getFullYear();\n    meanData.getSettings().then(function(res){\n      if(res.data.length == 1){\n        $rootScope.settings = res.data[0];\n      }\n    }); \n  }]);\n\n  app.controller('mainCtrl', ['$scope', '$rootScope',\n    function($scope, $rootScope){\n\n    $rootScope.prismHighlight = function(){\n      Prism.highlightAll();\n    };\n\n    $rootScope.tinymceUsage = {\n\t  setup: function(editor){\n\t\t  editor.on('keydown', function(event){\n\t\t\t if(event.keyCode == 9){\n\t\t\t\t if(event.shiftKey){\n\t\t\t\t\t editor.execCommand('Outdent');\n\t\t\t\t }else{\n\t\t\t\t\t editor.execCommand('Indent');\n\t\t\t\t }\n\t\t\t\t event.preventDefault();\n\t\t\t\t return false;\n\t\t\t } \n\t\t  });\n\t  },\n      height: 250,\n      plugins: 'link image codesample advlist code preview',\n      toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | codesample | link image',\n      valid_elements : '*[*]'\n    };\n\n    $rootScope.$on('onFinishRepeat', function(evt){\n      $scope.prismHighlight();\n    });\n\n  }]);\n\n  app.directive('onFinishRepeat', ['$timeout', function($timeout){\n    return {\n      restrict: 'A',\n      link: function(scope, element, attr){\n        if(scope.$last === true){\n          $timeout(function(){\n            scope.$emit(attr.onFinishRepeat);\n            scope.prismHighlight();\n          });\n        }\n      }\n    }\n  }]);\n\n  app.directive('subCatCounts', function(){\n    return function(scope, element, attrs){\n      if(scope.group == 'doc'){\n        scope.meanData.getDocCountsByCategory(attrs.subCatCounts)\n                          .then(function(result){\n          element.html(result.data);\n        });\n      }\n      if(scope.group == 'que'){\n        scope.meanData.getQueCountsByCategory(attrs.subCatCounts)\n                          .then(function(result){\n          element.html(result.data);\n        });\n      }\n    };\n  });\n\n  app.run(['$transitions', '$state', 'authentication', \n          function($transitions, $state, authentication){\n    $transitions.onStart({}, function($transitions){\n\n      if($transitions.$to().name.indexOf('admin') >= 0){\n        if(!authentication.isLoggedIn())\n          $state.go('login');\n      }\n      \n    });\n  }]);\n})();\n(function () {\r\n  angular.module('app').controller('dataNavCtrl', ['$scope', 'meanData', 'authentication', '$location', '$sce', '$stateParams', '$state',\r\n    function ($scope, meanData, authentication, $location, $sce, $stateParams, $state) {\r\n        \r\n        $scope.meanData = meanData;\r\n        $scope.isLoggedIn = authentication.isLoggedIn();\r\n\r\n        $scope.group = $stateParams.group;\r\n\r\n        if($scope.group == 'doc'){\r\n          $scope.navTitle = \"Documents\"\r\n        }\r\n        if($scope.group == 'que'){\r\n          $scope.navTitle = \"Questions Set\"\r\n        }\r\n\r\n        $scope.getCategories = function(){\r\n          meanData.getCategoriesByGroup($scope.group).then(function(data){\r\n            $scope.mainCategories = data.data;\r\n          }, function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.submitCat = function(){\r\n          $scope.addCat.group = $scope.group;\r\n          meanData.createCategory($scope.addCat).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          }, function(err){\r\n            console.log(err);\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.goToSubCatPage = function(mainCategory,category){\r\n          $location.path(\"/lc/\"+$scope.group+\"/\"+mainCategory+\"/\"+category).search({page: 1});\r\n        };\r\n\r\n        $scope.updateCategory = function(uCat){\r\n          meanData.updateCategory(uCat).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          },function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n\r\n        $scope.deleteCategory = function(id){\r\n          meanData.deleteCategory(id).then(function(res){\r\n            alert(res.data.message);\r\n            $state.reload();\r\n          },function(err){\r\n            alert(err.data.errmsg);\r\n          });\r\n        };\r\n    }]);\r\n})();\n(function () {\n  var app = angular.module('app')\n  app.controller('authCtrl', ['$scope', 'authentication', 'meanData', '$window','$rootScope', \n      function ($scope, authentication, meanData, $window, $rootScope) {\n\n      $scope.LoginErr = false;\n\n      $scope.login = function (user) {\n        authentication.login(user)\n          .error(function () {\n            $scope.LoginErr = true;\n          })\n          .then(function () {\n            window.location.href = \"/\";\n          })\n      };\n\n      $scope.register = function (userr) {\n        meanData.createUser(userr).then(function (res) {\n          alert(res.data.message);\n          // after registering, auto login\n          $scope.login(userr);\n        },function(err){\n          alert(err.statusText);\n        })\n      };\n\n    }]);\n  app.directive(\"pswVali\", function(){\n    return {\n      restrcit: \"A\",\n      scope: false,\n      require: \"ngModel\",\n      link: function(scope, attr, elem, ctrl){\n        ctrl.$parsers.push(function(val){\n          for(var i = 0; i < val.length; i++){\n            // contain number 0-9\n            var containNumPattern = /[0-9]/;\n            if(containNumPattern.test(val)){\n              ctrl.$setValidity(\"containNum\", true);\n            } else {\n              ctrl.$setValidity(\"containNum\", false);\n            }\n            // contain capital letter A-Z\n            var containCapitalPattern = /[A-Z]/;\n            if(containCapitalPattern.test(val)){\n              ctrl.$setValidity(\"containCapital\", true);\n            } else {\n              ctrl.$setValidity(\"containCapital\", false);\n            }\n            return val;\n          }\n        });\n      }\n    }\n  })\n})();\n(function(){\r\n\tvar app = angular.module('app');\r\n\tapp.controller('adminCtrl', [\"$scope\", function($scope){\r\n\r\n\t}]);\r\n})();\n(function () {\n  var app = angular.module('app');\n  app.controller('homeCtrl', ['$scope', '$window', '$location', 'meanData', 'authentication',\n    '$rootScope', function ($scope, $window, $location, meanData, authentication, $rootScope) {\n\n      $scope.showSearchDropDown = false;\n      $scope.curSelSearchKw = -1;\n      $scope.isLoggedIn = authentication.isLoggedIn();\n      $rootScope.inputing = 0;\n\n      $scope.hostName = $location.protocol() + \"://\" + location.host;\n\n      angular.element($window).on('click', function(){\n        $scope.showSearchDropDown = false;\n        $scope.$digest();\n      });\n      /* when mouse left click */\n      $scope.clickSearch = function(){\n        $scope.keywordBackup = $scope.keyword;\n        $scope.$digest();\n        $scope.doSearch(0);\n      }\n\n      $scope.setDataId = function(id){\n        $scope.dataId = id;\n      }\n\n      $scope.setDataGroup = function(group){\n        $scope.dataGroup = group;\n      }\n      /* when focus on each title (using up down arrow) */\n      $scope.focusSearch = function(signal){\n        var op = $scope.curSelSearchKw*1 + signal*1;\n        var curSelSearchTitle = document.getElementById(\"search-\" + op);\n        if(curSelSearchTitle){\n          $scope.setDataId(curSelSearchTitle.dataset.dataId);\n          $scope.setDataGroup(curSelSearchTitle.dataset.dataGroup);\n          var ori = document.getElementById(\"search-\" + $scope.curSelSearchKw);\n          if(ori){ ori.style.backgroundColor = null; }\n          \n          $scope.curSelSearchKw = $scope.curSelSearchKw*1 + signal*1;\n          $rootScope.inputing = -1;\n          $scope.keyword = curSelSearchTitle.dataset.title;\n          $scope.keywordBackup = curSelSearchTitle.dataset.title;\n          $scope.$digest();\n          document.getElementById(\"search-\" + op).style.backgroundColor = \"#ccc\";\n        }\n      }\n\n      $scope.mouseEnterSearch = function(val){\n        $rootScope.inputing = -1;\n        $scope.keyword = val;\n        $scope.$digest();\n      }\n\n      $scope.mouseLeaveSearch = function(){\n        $rootScope.inputing = 0;\n        $scope.keyword = $scope.keywordBackup;\n        $scope.$digest();\n      }\n\n      function clearPanels(){\n        $scope.filteredQuestions = null;\n        $scope.filteredDocs = null;\n        $scope.findedTile = null;\n      }\n\n      $scope.$watch('selector', function(){\n        $rootScope.inputing = 0;\n        $scope.keyword = \"\";\n        clearPanels();\n      });\n\n      $scope.searchTitle = function(keyword){\n        $rootScope.inputing = 0;\n        if(keyword){\n          $scope.showSearchDropDown = true;\n          $scope.curSelSearchKw = -1;\n          $scope.keywordBackup = keyword;\n          $scope.hightlyKeyword = keyword;\n\n          if($scope.selector == 'Doc'){\n            meanData.getDocTitleByKeyword(keyword).then(function(res){\n              $scope.findedTile = res.data;\n            });\n          }\n          if($scope.selector == 'Quiz'){\n            meanData.getQueTitleByKeyword(keyword).then(function(res){\n              $scope.findedTile = res.data;\n            });\n          }\n          if($scope.selector == 'All'){\n            meanData.getRelatedByKeyword(keyword).then(function(res){\n              var results = [];\n              res.forEach(function(object){\n                object.data.forEach(function(obj){\n                  results.push(obj);\n                });\n              });\n              $scope.findedTile = results;\n              $scope.$digest();\n            });\n          }\n        }else{\n          $scope.showSearchDropDown = false;\n        }\n      };\n      /* signal: 1-> if I enter the search keyword, then need to check whether is specific \n                  0-> because I select a specific keytitle, so is already specific\n      */\n      $scope.doSearch = function(signal){\n        if($scope.keyword && $scope.selector){\n          $scope.showSearchDropDown = false;\n          $scope.currentPage = 1;\n          if($scope.selector == 'Quiz'){\n            if((signal == 1 && $scope.curSelSearchKw != -1) || signal == 0){ \n              meanData.getQueById($scope.dataId).then(function(res){\n                res.data.showAnswer = true;\n                $scope.updateQueList(res.data);\n              });\n            } else {\n              meanData.getQuesByKeyword($scope.keyword).then(function (res){\n                $scope.filteredQuestions = res.data;\n                // $scope.totalItems = res.data.length;\n                // $scope.updateQueList();\n              });\n            }\n          }\n          if($scope.selector == 'Doc'){\n            if(signal == 1 && $scope.curSelSearchKw != -1 || signal == 0){\n              meanData.getDocById($scope.dataId).then(function(res){\n                res.data.showAnswer = true;\n                $scope.updateDocList(res.data);\n              });\n            } else {\n              meanData.getDocByKeyword($scope.keyword).then(function (res){\n                $scope.filteredDocs = res.data;\n                // $scope.totalItems = res.data.length;\n                // $scope.updateDocList();\n              });\n            }\n          }\n          if($scope.selector == 'All'){\n            $scope.clearQueList();\n            $scope.clearDocList();\n            if(signal == 1 && $scope.curSelSearchKw != -1 || signal == 0){\n              if($scope.dataGroup == 'doc'){\n                meanData.getDocById($scope.dataId).then(function(res){\n                  res.data.showAnswer = true;\n                  $scope.updateDocList(res.data);\n                });\n              }\n              if($scope.dataGroup == 'que'){\n                meanData.getQueById($scope.dataId).then(function(res){\n                  res.data.showAnswer = true;\n                  $scope.updateQueList(res.data);\n                });\n              }\n            } else {\n              meanData.getDocByKeyword($scope.keyword).then(function (res){\n                $scope.filteredDocs = res.data;\n              });\n              meanData.getQuesByKeyword($scope.keyword).then(function (res){\n                $scope.filteredQuestions = res.data;\n              });\n            }\n          }\n        }else{clearPanels();}\n      };\n\n    }]);\n  app.directive('toFocus', function(){\n    return {\n      scope: false,\n      restrict: \"A\",\n      link: function(scope, elem, attr){\n        elem.on('click', function(){\n          scope.setDataId(attr.dataId);\n          scope.setDataGroup(attr.dataGroup);\n          scope.clickSearch();\n        });\n        elem.on('mouseenter', function(evt){\n          scope.setDataId(attr.dataId);\n          scope.setDataGroup(attr.dataGroup);\n          scope.mouseEnterSearch(attr.title, evt);\n        });\n        elem.on('mouseleave', function(evt){\n          scope.mouseLeaveSearch(evt);\n        });\n      }\n    }\n  });\n  app.filter(\"titleDecorator\",['$rootScope', function($rootScope){\n    return function(t, k){\n      var result = \"\";\n      var title = t;\n\n      var addStrong = function(title, keyword){\n        var index = title.indexOf(keyword);\n        if(index >= 0){\n          var temp = title.substring(index+keyword.length);\n          result += title.substring(0,index) + \"<strong>\"+keyword+\"</strong>\" \n          return temp;\n        }\n      }\n\n      k.split(\" \").forEach(function(str){\n        var temp = addStrong(title, str);\n        if(typeof temp !== 'undefined'){\n          title = temp;\n        }\n        \n      });\n      \n      return result + title;\n    };\n  }]);\n  app.directive('searchFocus', function(){\n    return {\n      scope: false,\n      restrict: \"A\",\n      link: function(scope, elem, attr){\n        elem.on('keydown', function(evt){\n          if(evt.keyCode == 13){\n            scope.doSearch(1);\n          }\n          if(evt.keyCode == 40 || evt.keyCode == 38){\n            if(scope.showSearchDropDown){\n              evt.preventDefault();\n              if(evt.keyCode == 40){\n                scope.focusSearch(1);\n              }else{\n                scope.focusSearch(-1);\n              }\n            }\n          }\n        });\n      }\n    }\n  });\n})();\n(function(){\r\n\tangular.module(\"app\").controller('historyCtrl',\r\n\t\t['$scope', 'meanData', function($scope, meanData){\r\n\t\t$scope.getHistory = function(){\r\n\t\t\tmeanData.getSettings().then(function(res){\r\n\t\t\t\t$scope.history = res.data[0].history;\r\n\t\t\t});\r\n\t\t}\r\n\t}]);\r\n})();\n(function () {\r\n  angular.module('app').controller('listContainerCtrl', \r\n  \t['$scope', '$rootScope', 'meanData', 'authentication', '$location', '$stateParams',\r\n    '$state', '$stateParams', function ($scope, $rootScope, meanData, \r\n      authentication, $location, $stateParams, $state, $stateParams) {\r\n        \r\n        $scope.hostName = $location.protocol() + \"://\" + location.host;\r\n\t\t$scope.subCategory = $stateParams.category;\r\n\r\n\t\t$scope.numPerPage = 5;\r\n\r\n\t\t$scope.$on(\"totalItems\", function(evt, val){\r\n\t\t\t$scope.totalItems = val;\r\n\t\t});\r\n\r\n\t\t$scope.$on(\"selectedPage\", function(evt, val){\r\n\t\t\t$scope.selectedPage = val;\r\n\t\t});\r\n\r\n\t\t$scope.goToDataNav = function(){\r\n\t\t\t$location.path(\"/nav/\"+$location.path().split(\"/\")[2]);\r\n\t\t}\r\n\r\n\t\t$scope.$watch(\"numPerPage\", function(){\r\n\t\t\tif($scope.numPerPage > 0){\r\n\t\t\t\t$scope.$broadcast(\"changeNumPerPage\", $scope.numPerPage);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$scope.$watch(\"dateSortOption\", function(){\r\n\t\t\t$scope.$broadcast(\"changeDateSortOption\", $scope.dateSortOption);\r\n\t\t})\r\n\r\n\t\t$scope.$watch(\"selectedPage\", function(){\r\n\t    \tif($scope.selectedPage > 0){\r\n\t    \t\t$scope.$broadcast(\"changePage\", $scope.selectedPage);\r\n\t    \t}\r\n\t    });\r\n    }]);\r\n})();\n(function () {\n  angular.module('app').service('authentication', ['$http', '$window', '$q',\n   function ($http, $window, $q) {\n\n    var saveToken = function (token) {\n      $window.localStorage['mean-token'] = token;\n    };\n\n    var getToken = function () {\n      return $window.localStorage['mean-token'];\n    };\n\n    var isLoggedIn = function () {\n      var token = getToken();\n      var payload;\n\n      if(token){\n        payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n\n        return payload.exp > Date.now() / 1000;\n      } else {\n        return false;\n      }\n    };\n\n    var currentUser = function() {\n      if(isLoggedIn()){\n        var token = getToken();\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        return payload;\n      }\n    };\n\n    var login = function (user) {\n      return $http.post('/api/login', user).success(function (data) {\n        saveToken(data.token);\n      })\n    };\n\n    var logout = function () {\n      $window.localStorage.removeItem('mean-token');\n    };\n\n    return {\n      login: login,\n      isLoggedIn: isLoggedIn,\n      currentUser: currentUser,\n      logout: logout,\n      getToken: getToken,\n      saveToken: saveToken,\n\n    }\n\n  }])\n  \n})();\n(function () {\n  angular.module('app').service('meanData', ['$http', '$q', 'authentication',\n   function meanData($http, $q, authentication) {\n    var serverUrl = \"/api\";\n    var auth = {\n        headers: {\n          Authorization: 'Bearer ' + authentication.getToken()\n        }\n    };\n    /***** User *****/\n\n    var getAllUsers = function () {\n      return $http.get(serverUrl + '/user');\n    };\n\n    var getUserById = function (id) {\n      return $http.get(serverUrl + '/user/' + id);\n    };\n\n    var createUser = function (newUser) {\n      return $http.post(serverUrl + '/user', newUser, auth);\n    };\n\n    var updateUser = function (updateUser) {\n      return $http.put(serverUrl + '/user', updateUser, auth);\n    };\n\n    var deleteUser = function (id) {\n      return $http.delete(serverUrl + '/user?id=' + id, auth);\n    };\n\n    /***** Question *****/\n\n    var getQuesByCategory = function(category){\n      return $http.get(serverUrl + '/que/c/' + category); \n    };\n\n    var getQuesByCategoryAndPage = function(category, page, num){\n      if(num > 0 && page > 0)\n        return $http.get(serverUrl + '/que/c/' + category + '/'\n                        + page + \"?num=\"+num);\n    };\n\n    var getQueById = function(id){\n      return $http.get(serverUrl + '/que/id/' + id); \n    };\n\n    var getQueCategories = function(){\n      return $http.get(serverUrl + '/que/c');\n    };\n\n    var createQue = function (newQuestion) {\n      return $http.post(serverUrl + '/que', newQuestion, auth);\n    };\n\n    var updateQue = function (updateQuestion) {\n      return $http.put(serverUrl + '/que', updateQuestion, auth);\n    };\n\n    var deleteQue = function (id) {\n      return $http.delete(serverUrl + '/que/id/' + id, auth);\n    };\n\n    var getQueTitleByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/q/' + keyword + \"?need=title\"); \n    };\n\n    var getQuesByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/q/' + keyword + \"?need=\"); \n    };\n\n    /***** Document *****/\n\n    var getDocById = function(id){\n      return $http.get(serverUrl + '/doc/id/' + id);\n    };\n\n    var getDocCategories = function(){\n      return $http.get(serverUrl + '/doc/c');\n    };\n\n    var getDocByCategory = function(category){\n      return $http.get(serverUrl + '/doc/c/' + category);\n    };\n\n    var getDocByCategoryAndPage = function(category, page, num){\n      if(num > 0 && page > 0){\n        return $http.get(serverUrl + '/doc/c/' + category + \"/\"\n                        + page + \"?num=\" + num);\n      }\n    };\n\n    var createDoc = function(doc){\n      return $http.post(serverUrl + '/doc', doc, auth);\n    };\n\n    var updateDoc = function(doc){\n      return $http.put(serverUrl + '/doc', doc, auth);\n    };\n\n    var deleteDoc = function(id){\n      return $http.delete(serverUrl + '/doc/id/' + id, auth);\n    }\n\n    var getDocTitleByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/d/' + keyword + \"?need=title\");\n    }\n\n    var getDocByKeyword = function(keyword){\n      return $http.get(serverUrl + '/s/d/' + keyword + \"?need=\");\n    }\n\n    /***** Category *****/\n    var getCategories = function(){\n      return $http.get(serverUrl + '/cat');\n    }\n\n    var getCategoriesByGroup = function(group){\n      return $http.get(serverUrl + '/cat/' + group);\n    }\n\n    var createCategory = function(cat){\n      return $http.post(serverUrl + '/cat', cat, auth);\n    }\n\n    var updateCategory = function(cat){\n      return $http.put(serverUrl + '/cat', cat, auth);\n    }\n\n    var deleteCategory = function(id){\n      return $http.delete(serverUrl + '/cat/id/' + id, auth);\n    }\n\n    /***** Log *****/\n    var getAllLogs = function(){\n      return $http.get(serverUrl + '/log', auth);\n    }\n\n    var getLogsByIp = function(ip){\n      return $http.get(serverUrl + '/log?ip=' + ip, auth)\n    }\n\n    var getLogsByDate = function(date){\n      return $http.get(serverUrl + '/log?date=' + date, auth);\n    }\n\n    var deleteAllLogs = function(){\n      return $http.delete(serverUrl + '/log', auth);\n    }\n\n    /***** Settings *****/\n    var getSettings = function(){\n      return $http.get(serverUrl + '/settings', auth);\n    }\n\n    var doDBBackup = function(){\n      return $http.get(serverUrl + '/settings/dbbu', auth);\n    }\n\n    var updateSettings = function(settings){\n      return $http.put(serverUrl + '/settings', settings, auth);\n    }\n\n    var deleteSettings = function(){\n      return $http.delete(serverUrl + '/settings', auth);\n    }\n\n    /***** Count *****/\n    var getDocCountsByCategory = function(category){\n      return $http.get(serverUrl + '/count/doc/' + category);\n    }\n\n    var getQueCountsByCategory = function(category){\n      return $http.get(serverUrl + '/count/que/' + category);\n    }\n\n    var getDocCounts = function(){\n      return $http.get(serverUrl + '/count/doc');\n    }\n\n    var getQueCounts = function(){\n      return $http.get(serverUrl + '/count/que');\n    }\n\n    var getQueCountsByAnswer = function(answer){\n      return $http.get(serverUrl + '/count/que/all/' + answer);\n    }\n\n    /***** User Request *****/\n    var getAllUserRequests = function(){\n      return $http.get(serverUrl + '/req');\n    }\n\n    var sendUserRequest = function(req){\n      return $http.post(serverUrl + '/req', req);\n    }\n\n    var deleteUserRequest = function(id){\n      return $http.delete(serverUrl + '/req/' + id);\n    }\n\n    /***** Others *****/\n    var getRelatedByKeyword = function(keyword){\n      var p =new Promise(function(resolve, reject){\n        $q.all([\n          $http.get(serverUrl + '/s/d/' + keyword + \"?need=title+group\"),\n          $http.get(serverUrl + '/s/q/' + keyword + \"?need=title+group\")\n        ]).then(function(res){\n          resolve(res);\n        });\n      });\n      return p;\n    }\n\n    return {\n      getAllUsers: getAllUsers,\n      createUser: createUser,\n      updateUser: updateUser,\n      deleteUser: deleteUser,\n      getUserById: getUserById,\n\n      getQueById: getQueById,\n      getQueCategories: getQueCategories,\n      getQuesByCategoryAndPage: getQuesByCategoryAndPage,\n      getQuesByCategory: getQuesByCategory,\n      createQue: createQue,\n      updateQue: updateQue,\n      deleteQue: deleteQue,\n\n      getDocById: getDocById,\n      getDocCategories: getDocCategories,\n      getDocByCategoryAndPage: getDocByCategoryAndPage,\n      getDocByCategory: getDocByCategory,\n      createDoc: createDoc,\n      updateDoc: updateDoc,\n      deleteDoc: deleteDoc,\n\n      getCategories: getCategories,\n      getCategoriesByGroup: getCategoriesByGroup,\n      createCategory: createCategory,\n      updateCategory: updateCategory,\n      deleteCategory: deleteCategory,\n\n      getQueTitleByKeyword: getQueTitleByKeyword,\n      getDocTitleByKeyword: getDocTitleByKeyword,\n      getQuesByKeyword: getQuesByKeyword,\n      getDocByKeyword: getDocByKeyword,\n      getRelatedByKeyword: getRelatedByKeyword,\n\n      getAllLogs: getAllLogs,\n      getLogsByIp: getLogsByIp,\n      getLogsByDate: getLogsByDate,\n      deleteAllLogs: deleteAllLogs,\n\n      getDocCountsByCategory: getDocCountsByCategory,\n      getQueCountsByCategory: getQueCountsByCategory,\n      getDocCounts: getDocCounts,\n      getQueCounts: getQueCounts,\n      getQueCountsByAnswer: getQueCountsByAnswer,\n\n      getSettings: getSettings,\n      updateSettings: updateSettings,\n      deleteSettings: deleteSettings,\n\n      getAllUserRequests: getAllUserRequests,\n      sendUserRequest: sendUserRequest,\n      deleteUserRequest: deleteUserRequest,\n\n      doDBBackup: doDBBackup\n    }\n  }])\n})();\n(function(){\r\n\tangular.module('app').controller('adminOverviewsCtrl', ['$scope', \r\n\t\t'meanData', function($scope, meanData){\r\n\r\n\t\t$scope.getDocCounts = function(){\r\n\t\t\tmeanData.getDocCounts().then(function(res){\r\n\t\t\t\t$scope.docNums = res.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.getQueCounts = function(){\r\n\t\t\tmeanData.getQueCounts().then(function(res){\r\n\t\t\t\t$scope.queNums = res.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.getQueNullCounts = function(){\r\n\t\t\tmeanData.getQueCountsByAnswer('null').then(function(res){\r\n\t\t\t\t$scope.nullQueNums = res.data;\r\n\t\t\t});\r\n\t\t}\r\n\t}])\r\n})();\n(function(){\r\n\tangular.module('app').controller('adminAccessCtrl', ['$scope', 'meanData', \r\n\t\t'$state', function($scope, meanData, $state){\r\n\r\n\t\t$scope.findAllLogs = function(){\r\n\t\t\tmeanData.getAllLogs().then(function(data){\r\n\t\t\t\t$scope.logs = data.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteAllLogs = function(){\r\n\t\t\tmeanData.deleteAllLogs().then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\t$state.reload();\r\n\t\t\t});\r\n\t\t}\r\n\t}])\r\n})();\n(function(){\r\n\tvar app = angular.module('app');\r\n\tapp.controller('adminMgCtrl', ['$scope', function($scope){\r\n\t\t$scope.doGenerate = function(mg){\r\n\t\t\t\r\n\t\t}\r\n\t}]);\r\n})();\n(function(){\r\n\tvar app = angular.module('app');\r\n\tapp.controller('userReqCtrl', [\"$scope\", \"meanData\", \"$state\",\r\n\t\tfunction($scope, meanData, $state){\r\n\r\n\t\t$scope.getAllUserRequests = function(){\r\n\t\t\tmeanData.getAllUserRequests().then(function(res){\r\n\t\t\t\t$scope.requests = res.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteRequest = function(id){\r\n\t\t\tmeanData.deleteUserRequest(id).then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\t$state.reload();\r\n\t\t\t});\r\n\t\t}\r\n\t}]);\r\n})();\n(function(){\r\n\tangular.module('app').controller('adminSettingsCtrl', ['$scope', 'meanData',\r\n\t\t\t\t'$state', function($scope, meanData, $state){\r\n\r\n\t\t$scope.backupDB = function(){\r\n\t\t\tmeanData.doDBBackup().then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\t$state.reload();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.getSettings = function(){\r\n\t\t\tmeanData.getSettings().then(function(res){\r\n\t\t\t\tif(res.length > 1){\r\n\t\t\t\t\talert(\"More than one settings found!\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\t$scope.settings = res.data[0];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.updateSettings = function(settings){\r\n\t\t\tmeanData.updateSettings(settings).then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\twindow.location.href = \"/admin/settings\";\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteSettings = function(){\r\n\t\t\tmeanData.deleteSettings().then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t});\r\n\t\t}\r\n\t}])\r\n})();\n(function(){\r\n\tangular.module('app').controller('adminUsersCtrl', ['$scope', 'meanData','$state',\r\n\t\tfunction($scope, meanData, $state){\r\n\t\t\r\n\t\tmeanData.getAllUsers().then(function(res){\r\n\t\t\t$scope.users = res.data;\r\n\t\t});\r\n\r\n\t\t$scope.deleteUser = function(id){\r\n\t\t\tif(confirm(\"Are you sure to delete?\")){\r\n\t\t\t\tmeanData.deleteUser(id).then(function(res){\r\n\t\t\t\t\talert(res.data.message);\r\n\t\t\t\t\t$state.reload();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}])\r\n})();\n(function () {\r\n\tangular.module('app').directive('addDoc', ['$stateParams', 'meanData', \r\n\t\t\t\t\t'$state', '$location', 'authentication', \r\n\t\t\t\t\tfunction ($stateParams, meanData, $state, $location, \r\n\t\t\t\t\t\tauthentication) {\r\n\t\treturn {\r\n      \t\trestrict: 'E',\r\n      \t\trequire: '?ngModel',\r\n\t\t\tscope: false,\r\n      \t\ttemplateUrl: '/document/add-document/add-document.view.html',\r\n      \t\tlink: function($scope, element, attr){\r\n\r\n\t\t        $scope.addDocPage = function(){\r\n\t\t        \t$scope.addD = new Object();\r\n\t\t            $scope.showAdd=true;\r\n\t\t            $scope.addD.category=$stateParams.category;\r\n\t\t            $scope.addD.title = \r\n\t\t                  $scope.subCategory.toLowerCase()+\" \";\r\n\t\t            // category directive\r\n\t\t            $scope.showCategories('doc');\r\n\t\t            $scope.categorySetter($scope.addD.category);\r\n\t\t            $scope.selRelateds = [];\r\n\t\t        }\r\n\r\n\t\t        $scope.cancelAddDoc = function(){\r\n\t\t        \tif(confirm(\"Are you sure to discard the create?\")){\r\n\t\t              // from related directive\r\n\t\t              $scope.selRelateds = null;\r\n\t\t              $scope.addD = null;\r\n\t\t            }\r\n\t\t        }\r\n\r\n\t\t        $scope.submitDoc = function(){\r\n\t\t            if($scope.addD){\r\n\t\t                $scope.addD.related = [];\r\n\t\t                $scope.addD.category = $scope.categorModel_;\r\n\t\t                // from related directive\r\n\t\t                $scope.selRelateds.forEach(function(elem){\r\n\t\t                  $scope.addD.related.push(elem);\r\n\t\t                });\r\n\r\n\t\t                $scope.addD.author = authentication.currentUser().name;\r\n\t\t                meanData.createDoc($scope.addD).then(function (res) {\r\n\t\t                    alert(res.data.message);\r\n\t\t                    $state.reload();\r\n\t\t                }, function(err){\r\n\t\t                \talert(err.data.message);\r\n\t\t            \t});\r\n\t\t          \t}\r\n\t\t      \t};\r\n      \t\t}\r\n      \t}\r\n    }]);\r\n})();\n(function () {\r\n  angular.module('app').directive('addQue', ['meanData', 'authentication', '$location', \r\n    '$stateParams', '$state', function (meanData, authentication, $location, $stateParams, \r\n      $state) {\r\n      return {\r\n          restrict: 'E',\r\n          require: '?ngModel',\r\n          scope: false,\r\n          templateUrl: '/question/add-question/add-question.view.html',\r\n          link: function($scope, element, attr){\r\n            \r\n            $scope.showCategories = function(){\r\n              meanData.getCategoriesByGroup('que').then(function(res){\r\n                $scope.categoriesOptions = res.data;\r\n              });\r\n            };\r\n\r\n            $scope.goToQueNav = function(){\r\n              $location.path(\"/nav/que\");\r\n            };\r\n\r\n            $scope.addQuePage = function(){\r\n              $scope.addQ = new Object();\r\n              $scope.showAdd=true;\r\n              $scope.showCategories('que');\r\n              $scope.addQ.category = $stateParams.category;\r\n              $scope.categorySetter($scope.addQ.category);\r\n              $scope.selRelateds = [];\r\n            }\r\n\r\n            $scope.submitQue = function(){\r\n              if($scope.addQ){\r\n                $scope.addQ.related = [];\r\n                $scope.selRelateds.forEach(function(elem){\r\n                  $scope.addQ.related.push(elem);\r\n                });\r\n                $scope.addQ.category = $scope.categorModel_;\r\n                $scope.addQ.author = authentication.currentUser().name;\r\n                if($scope.addQ.unknownCompany){\r\n                  $scope.addQ.company = \"Unknown\";\r\n                }\r\n                meanData.createQue($scope.addQ).then(function (res) {\r\n                  alert(res.data.message);\r\n                  $state.reload();\r\n                  }, function(err){\r\n                  alert(err.data.message);\r\n                });\r\n              }\r\n            };\r\n          }\r\n      }\r\n    }]);\r\n})();\n(function () {\r\n\tangular.module('app').directive('listDoc', ['$rootScope','$stateParams', 'meanData', \r\n\t\t\t\t\t'$state', '$location', 'authentication',\r\n\t\t\t\t\tfunction ($rootScope, $stateParams, meanData, $state,\r\n\t\t\t\t\t $location, authentication) {\r\n\t\treturn {\r\n      \t\trestrict: 'E',\r\n      \t\trequire: '?ngModel',\r\n\t\t\tscope: false,\r\n      \t\ttemplateUrl: '/document/list-document/list-document.view.html',\r\n      \t\tlink: function(scope, element, attr){\r\n      \t\t\tscope.isLoggedIn = authentication.isLoggedIn();\r\n\t\t        scope.docId = $stateParams.id;\r\n\t\t        scope.currentPage = $stateParams.page;\r\n\t\t        scope.mainCategory = $stateParams.mainCategory;\r\n\r\n\t\t        var changePage = function(page){\r\n      \t\t\t\tvar begin = (page - 1) * scope.numPerPage;\r\n\t\t\t\t\tvar end = begin + scope.numPerPage;\r\n\t\t\t\t\tif(scope.docs){\r\n\t\t\t\t  \t\tscope.filteredDocs = scope.docs.slice(begin, end);\r\n\t\t\t\t\t}\r\n      \t\t\t}\r\n\r\n      \t\t\tif(scope.docId){\r\n      \t\t\t\tmeanData.getDocById(scope.docId).then(function(res){\r\n      \t\t\t\t\tscope.filteredDocs = [res.data];\r\n      \t\t\t\t\tscope.filteredDocs[0].showAnswer = true;\r\n      \t\t\t\t});\r\n      \t\t\t} else {\r\n      \t\t\t\tif(scope.subCategory){\r\n      \t\t\t\t\tif(scope.currentPage){\r\n\t\t\t\t\t\t\tmeanData.getDocByCategory(scope.subCategory).then(function (data) {\r\n\t\t\t\t                scope.docs = data.data;\r\n\t\t\t\t                scope.$emit(\"totalItems\", data.data.length);\r\n\t\t\t\t                scope.selectedPage = scope.currentPage;\r\n\t\t\t\t\t\t\t\tchangePage(scope.currentPage);\r\n\t\t\t\t\t\t\t\tscope.$emit(\"selectedPage\", scope.currentPage);\r\n\t\t\t\t                scope.updateDocList();\r\n\t\t\t\t            });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$location.path().search({page: 1});\r\n\t\t\t\t\t\t}\r\n      \t\t\t\t}\r\n\t\t    \t}\r\n\r\n\t\t    \tscope.goToDocNav = function(){\r\n\t\t            $location.path(\"/nav/doc\");\r\n\t\t        };\r\n\r\n      \t\t\tscope.doDeepCopy = function(doc){\r\n      \t\t\t\tscope.backupDoc = angular.copy(doc);\r\n      \t\t\t}\r\n\r\n      \t\t\tscope.$on(\"changePage\", function(evt, val){\r\n      \t\t\t\t$location.path($location.path()).search({page: val});\r\n      \t\t\t\tchangePage(val);\r\n      \t\t\t})\r\n      \t\t\tscope.$on(\"changeNumPerPage\", function(evt, val){\r\n      \t\t\t\tscope.numPerPage = val;\r\n      \t\t\t\tscope.updateDocList();\r\n      \t\t\t})\r\n      \t\t\tscope.$on(\"changeDateSortOption\", function(evt, val){\r\n      \t\t\t\tif(scope.docs){\r\n      \t\t\t\t\tscope.docs.reverse();\r\n      \t\t\t\t\tscope.updateDocList();\r\n      \t\t\t\t}\r\n      \t\t\t});\r\n\r\n      \t\t\tscope.clearDocList = function(){\r\n      \t\t\t\tscope.filteredDocs = null;\r\n      \t\t\t}\r\n\r\n\t\t\t\tscope.updateDocList = function(doc){\r\n\t\t\t\t\tif(typeof doc == \"object\"){\r\n\t\t\t\t\t\tvar result = [];\r\n\t\t\t\t\t\tresult.push(doc);\r\n\t\t\t\t\t\treturn scope.filteredDocs = result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchangePage(scope.currentPage);\r\n\t\t\t\t}\r\n\r\n\t\t\t    scope.$watch(\"currentPage\", function(){\r\n\t\t\t    \tif(scope.currentPage > 0){\r\n\t\t\t    \t\tscope.updateDocList();\r\n\t\t\t    \t}\r\n\t\t\t    });\r\n\r\n\t\t        scope.resetUpdateDoc = function(doc){\r\n\t\t          if(confirm(\"Are you sure to discard your records?\")){\r\n\t\t          \tscope.backupDoc.isUpdateDoc = false;\r\n\t\t          \t\r\n\t\t          \tObject.keys(doc).forEach(function(property){\r\n\t\t          \t\tdoc[property] = scope.backupDoc[property];\r\n\t\t          \t});\r\n\t\t          \tsetTimeout(function(){\r\n\t\t          \t\tscope.prismHighlight();\r\n\t\t          \t});\r\n\r\n\t\t          \tdoc.showAnswer = true;\r\n\t\t          }\r\n\t\t        }\r\n\t\t        \r\n\t\t        scope.updateDocPage = function(doc){\r\n\t\t        \tdoc.isUpdateDoc=true;\r\n\t\t        \tscope.doDeepCopy(doc);\r\n\t\t        \t// category directive\r\n\t\t        \tscope.showCategories(doc.group);\r\n\t\t        \tscope.categorySetter(doc.category);\r\n\t\t        \t// related directive\r\n\t\t        \tscope.selRelateds = doc.related;\r\n\t\t        }\r\n\r\n\t\t\t    scope.updateDoc = function(doc, categorModel_){\r\n\t\t\t    \tvar changed = (categorModel_ == doc.category ? false : true);\r\n\t\t\t\t\tif(confirm(\"Are you sure to make a update?\")){\r\n\t\t\t\t\t\tdoc.related = [];\r\n\t\t\t\t\t\tdoc.category = categorModel_;\r\n\t\t\t\t\t\t// related directive\r\n\t\t          \t\tscope.selRelateds.forEach(function(elem){\r\n\t\t\t            \tdoc.related.push(elem);\r\n\t\t\t          \t});\r\n\t\t\t      \t\tmeanData.updateDoc(doc).then(function (res) {\r\n\t\t\t        \t\talert(res.data.message);\r\n\t\t\t        \t\tif(changed)\r\n\t\t\t        \t\t\treturn $state.reload();\r\n\t\t\t        \t\tdoc.isUpdateDoc=false;\r\n\t\t\t        \t\tsetTimeout(function(){\r\n\t\t\t\t          \t\tscope.prismHighlight();\r\n\t\t\t\t          \t});\r\n\t\t\t      \t\t  }, function(res){\r\n\t\t\t      \t\t\talert(res.statusText);\r\n\t\t\t      \t\t});\r\n\t\t\t      \t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.deleteDoc = function(doc){\r\n\t\t\t\t\tif(confirm(\"Are you sure to delete this document?\")){\r\n\t\t\t\t\t\tmeanData.deleteDoc(doc._id).then(function(res){\r\n\t\t\t\t\t\t\talert(res.data.message);\r\n\t\t\t\t\t\t\t$state.reload();\r\n\t\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t\talert(res.statusText);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n      \t\t}\r\n    \t}\r\n  \t}]);\r\n})();\n(function () {\n\tangular.module('app').directive('listQue', ['meanData', '$stateParams',\n\t\t'authentication', '$state', '$location',\n\t\tfunction (meanData, $stateParams, authentication, $state, $location) {\n\t\treturn {\n\t\t\tscope: false,\n      \t\trestrict: 'E',\n      \t\ttemplateUrl: '/question/list-question/list-question.view.html',\n      \t\tlink: function(scope, element, attr){\n\n        \t\tscope.isLoggedIn = authentication.isLoggedIn();\n      \t\t\tscope.questionId = $stateParams.id;\n      \t\t\tscope.mainCategory = $stateParams.mainCategory;\n      \t\t\tscope.currentPage = $stateParams.page;\n      \t\t\tscope.reverse = true;\n\n\t\t        var changePage = function(page){\n      \t\t\t\tvar begin = (page - 1) * scope.numPerPage;\n\t\t\t\t\tvar end = begin + scope.numPerPage;\n\t\t\t\t\tif(scope.questions){\n\t\t\t\t  \t\tscope.filteredQuestions = scope.questions.slice(begin, end);\n\t\t\t\t\t}\n      \t\t\t}\n\n      \t\t\tscope.orderByDate = function(item) {\n\t\t\t\t    var parts = item.created.split('-');\n\t\t\t\t    temp = parts[2].substring(0,2);\n\t\t\t\t    var number = parseInt(temp + parts[1] + parts[0]);\n\n\t\t\t\t    return -number;\n\t\t\t\t};\n\n      \t\t\t// receive question id\n\t\t        if(scope.questionId){\n\t\t    \t      meanData.getQueById(scope.questionId).then(function(res){\n\t\t          \t\tscope.filteredQuestions = [res.data];\n\t\t          \t\tscope.filteredQuestions[0].showAnswer = true;\n\t\t          });\n\t\t        } else {\n\t\t        \tif(scope.subCategory){\n\t\t        \t\tif(scope.currentPage){\n\t\t\t\t\t\t\tmeanData.getQuesByCategory(scope.subCategory).then(function (data) {\n\t\t\t\t                scope.questions = data.data;\n\t\t\t\t                scope.$emit(\"totalItems\", data.data.length);\n\t\t\t\t                scope.selectedPage = scope.currentPage;\n\t\t\t\t\t\t\t\tchangePage(scope.currentPage);\n\t\t\t\t\t\t\t\tscope.$emit(\"selectedPage\", scope.currentPage);\n\t\t\t\t                scope.updateQueList();\n\t\t\t\t            });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$location.path().search({page: 1});\n\t\t\t\t\t\t}\n\t\t        \t}\n\t\t        }\n\n\t\t        scope.sendRequest = function(req, que){\n\t\t        \tif(!req)\n\t\t        \t\treturn alert(\"Invalid Input!\");\n\t\t        \treq.link = scope.hostName + \"/\" + que.group + \"?id=\" + que._id;\n\t\t        \tmeanData.sendUserRequest(req).then(function(res){\n\t\t        \t\talert(res.data.message);\n\t\t        \t\tObject.keys(req).forEach(function(k){\n\t\t\t        \t\treq[k] = null;\n\t\t\t        \t});\n\t\t        \t\tque.showCorrect = false;\n\t\t        \t});\n\t\t        }\n\n\t\t        scope.$on(\"changePage\", function(evt, val){\n      \t\t\t\t$location.path($location.path()).search({page: val});\n      \t\t\t\tchangePage(val);\n      \t\t\t});\n      \t\t\tscope.$on(\"changeNumPerPage\", function(evt, val){\n      \t\t\t\tif(val > -1){\n      \t\t\t\t\tscope.numPerPage = val;\n      \t\t\t\t\tscope.updateQueList();\n      \t\t\t\t}\n      \t\t\t});\n      \t\t\tscope.$on(\"changeDateSortOption\", function(evt, val){\n      \t\t\t\tif(val){\n      \t\t\t\t\tscope.questions.reverse();\n      \t\t\t\t\tscope.updateQueList();\n      \t\t\t\t}\n      \t\t\t});\n\n\t\t        scope.updateQuePage = function(question){\n\t\t        \tquestion.isUpdateQuestion=true;\n\t\t        \tquestion.showAnswer=true;\n\t\t        \t// category directive\n\t\t        \tscope.showCategories(question.group);\n\t\t        \tscope.categorySetter(question.category);\n\t\t        \t// related directive\n\t\t        \tscope.selRelateds=question.related;\n\n\t\t        \tscope.questionBackup = angular.copy(question);\n\t\t        }\n\n\t\t        scope.clearQueList = function(){\n\t\t        \tscope.filteredQuestions = null;\n\t\t        }\n\n\t\t\t\tscope.updateQueList = function(que){\n\t\t\t\t\tif(typeof que == \"object\"){\n\t\t\t\t\t\tvar result = [];\n\t\t\t\t\t\tresult.push(que);\n\t\t\t\t\t\treturn scope.filteredQuestions = result;\n\t\t\t\t\t}\n\t\t\t\t\tchangePage(scope.currentPage);\n\t\t\t\t}\n\n\t\t\t    scope.$watch(\"currentPage\", function(){\n\t\t\t    \tif(scope.currentPage > 0){\n\t\t\t    \t\tscope.updateQueList();\n\t\t\t    \t}\n\t\t\t    });\n\n\t\t\t    scope.updateQuestion = function(question, selRelateds, categorModel_){\n\t\t\t    \tif(confirm(\"Are you sure to update?\")){\n\t\t\t    \t\tvar changed = (categorModel_ == question.category ? false : true);\n\t\t\t    \t\tquestion.category = categorModel_;\n\t\t\t\t        question.author = authentication.currentUser().name;\n\t\t\t\t        question.related = [];\n\t\t          \t\tselRelateds.forEach(function(elem){\n\t\t\t            \tquestion.related.push(elem);\n\t\t\t          \t});\n\t\t\t          \tif(question.unknownCompany){\n\t\t                  question.company = \"Unknown\";\n\t\t                }\n\t              \t\tmeanData.updateQue(question).then(function(res){\n\t\t\t\t\t\t\talert(res.data.message);\n\t\t\t\t\t\t\tif(changed)\n\t\t\t\t\t\t\t\treturn $state.reload();\n\t\t\t\t\t\t\tquestion.isUpdateQuestion = false;\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t          \t\tscope.prismHighlight();\n\t\t\t\t          \t});\n\t\t\t\t\t\t}, function(res){\n\t\t\t\t\t\t\talert(res.statusText);\n\t\t\t\t\t\t});\n\t\t\t    \t}\n\t\t\t\t};\n\n\t\t\t\tscope.cancelUpdateQue = function(question){\n\t\t\t\t\tif(confirm(\"Are you sure to discards update?\")){\n\t\t\t\t\t\tObject.keys(question).forEach(function(property){\n\t\t\t          \t\tquestion[property] = scope.questionBackup[property];\n\t\t\t          \t});\n\t\t\t\t\t\tquestion.isUpdateQuestion=false;\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t          \t\tscope.prismHighlight();\n\t\t\t          \t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tscope.deleteQuestion = function(question){\n\t\t\t\t\tif(confirm(\"Are you sure to delete this question?\")){\n\t\t\t\t\t\tmeanData.deleteQue(question._id).then(function(res){\n\t\t\t\t\t\t\talert(res.data.message);\n\t\t\t\t\t\t\t$state.reload();\n\t\t\t\t\t\t},function(res){\n\t\t\t\t\t\t\talert(res.statusText);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n      \t\t}\n    \t}\n  \t}]);\n})();\n(function(){\r\n\tangular.module('app').directive('category', ['meanData', \r\n\t\t\t\tfunction(meanData){\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n      \t\trequire: '?ngModel',\r\n\t\t\tscope: false,\r\n      \t\ttemplateUrl: '/common/directives/category/category.view.html',\r\n      \t\tlink: function(scope, element, attr){\r\n      \t\t\t\r\n      \t\t\tscope.categorySetter = function(model){\r\n      \t\t\t\tscope.categorModel_ = model;\r\n      \t\t\t};\r\n\r\n      \t\t\tscope.showCategories = function(group){\r\n\t\t          meanData.getCategoriesByGroup(group).then(function(res){\r\n\t\t            scope.categoriesOptions = res.data;\r\n\t\t          });\r\n\t\t        };\r\n      \t\t}\r\n\t\t}\r\n\t}]);\r\n})();\n(function () {\n  angular.module('app').directive('navigation', function () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/common/directives/navigation/navigation.view.html'\n    }\n  }).controller('navCtrl', ['$scope', '$location', 'authentication', '$state', '$window', '$rootScope',\n  function($scope, $location, authentication, $state, $window, $rootScope){\n    $scope.logout = function () {\n      authentication.logout();\n      $window.location.href = \"/\";\n    };\n    \n    // get current user\n\t  $scope.currentUser = authentication.currentUser();\n\t\n    $scope.isLoggedIn = authentication.isLoggedIn();\n    $rootScope.isActive = function(viewLocation){\n      if(viewLocation === '/')\n        return $location.path() === viewLocation;\n      return $location.path().indexOf(viewLocation) >= 0;\n    };\n  }])\n})();\n(function(){\r\n\tangular.module('app').directive('related', ['meanData',\r\n\t\t\tfunction(meanData){\r\n\t\treturn {\r\n\t\t\tscope: false,\r\n\t\t\trestrict: 'E',\r\n\t\t\ttemplateUrl: '/common/directives/related/related.view.html',\r\n\t\t\tlink: function(scope, element, attr){\r\n\t\t\t\t\r\n\t\t\t\tscope.removeCurSelRelated = function(selRelateds, index){\r\n\t\t          selRelateds.splice(index, 1);\r\n\t\t        };\r\n\r\n\t\t\t\tscope.addThisRelated = function(selRelateds, thisRelated){\r\n\t\t          if(!thisRelated)\r\n\t\t            return false;\r\n\t\t          if(selRelateds.length < 1){\r\n\t\t            selRelateds.push(thisRelated[0]);\r\n\t\t          }else{\r\n\t\t            for(var i = 0; i < selRelateds.length; i++){\r\n\t\t              if(selRelateds[i].title != thisRelated[0].title){\r\n\t\t                if(i == (selRelateds.length-1)){\r\n\t\t                  selRelateds.push(thisRelated[0]);\r\n\t\t                }\r\n\t\t              }else{\r\n\t\t                break;\r\n\t\t              }\r\n\t\t            }\r\n\t\t          }\r\n\t\t        };\r\n\r\n\t\t        scope.getRelatedByKeyword = function(searchRelatedKeyword){\r\n\t\t          if(searchRelatedKeyword){\r\n\t\t            meanData.getRelatedByKeyword(searchRelatedKeyword).then(function(data){\r\n\t\t              var relateds = [];\r\n\t\t              data.forEach(function(object){\r\n\t\t                object.data.forEach(function(obj){\r\n\t\t                  relateds.push(obj);\r\n\t\t                });\r\n\t\t              });\r\n\t\t              scope.relateds = relateds;\r\n\t\t              scope.$digest();\r\n\t\t            });\r\n\t\t          }else{\r\n\t\t          \tscope.relateds = null;\r\n\t\t          }\r\n\t\t        };\r\n\t\t\t}\r\n\t\t}\r\n\t}]);\r\n})();"]}