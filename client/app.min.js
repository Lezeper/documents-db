!function(){var e=angular.module("app",["ui.router","ngAnimate","ui.bootstrap","ngSanitize","ui.tinymce","ngclipboard"]);e.config(["$stateProvider","$locationProvider","$urlRouterProvider",function(e,t,n){e.state("root",{url:"/",templateUrl:"/home/home.view.html",controller:"homeCtrl"}).state("login",{url:"/login",templateUrl:"/auth/auth.view.html",controller:"loginCtrl"}).state("history",{url:"/version_history",templateUrl:"/history/history.view.html",controller:"historyCtrl"}).state("dataNav",{url:"/nav/:group",templateUrl:"/data-nav/data-nav.view.html",controller:"dataNavCtrl"}).state("listContainer",{url:"/lc",templateUrl:"/list-container/list-container.view.html",controller:"listContainerCtrl"}).state("listContainer.doc",{url:"/doc/:mainCategory/:category?page",templateUrl:"/document/document.view.html",reloadOnSearch:!1}).state("specific_document",{url:"/doc?id",templateUrl:"/document/document.view.html"}).state("listContainer.que",{url:"/que/:mainCategory/:category?page",templateUrl:"/question/question.view.html",reloadOnSearch:!1}).state("specific_question",{url:"/que?id",templateUrl:"/question/question.view.html"}).state("admin",{url:"/admin/",templateUrl:"/admin/admin.view.html",controller:"adminCtrl"}).state("admin.overviews",{url:"overviews/",templateUrl:"/admin/overviews/admin.overviews.view.html",controller:"adminOverviewsCtrl"}).state("admin.users",{url:"users/",templateUrl:"/admin/users/admin.users.view.html",controller:"adminUsersCtrl"}).state("admin.access",{url:"access/",templateUrl:"/admin/access/admin.access.view.html",controller:"adminAccessCtrl"}).state("admin.settings",{url:"settings/",templateUrl:"/admin/settings/admin.settings.view.html",controller:"adminSettingsCtrl"}).state("admin.mg",{url:"mg/",templateUrl:"/admin/mg/admin.mg.view.html",controller:"adminMgCtrl"}).state("admin.request",{url:"request/",templateUrl:"/admin/request/admin.req.view.html",controller:"userReqCtrl"}),n.otherwise("/"),t.html5Mode(!0)}]),e.controller("footerCtrl",["$scope","meanData","$rootScope",function(e,t,n){e.year=(new Date).getFullYear(),t.getSettings().then(function(e){1==e.data.length&&(n.settings=e.data[0])})}]),e.controller("mainCtrl",["$scope","$rootScope",function(e,t){t.prismHighlight=function(){Prism.highlightAll()},t.tinymceUsage={setup:function(e){e.on("keydown",function(t){if(9==t.keyCode)return t.shiftKey?e.execCommand("Outdent"):e.execCommand("Indent"),t.preventDefault(),!1})},height:250,plugins:"link image codesample advlist code preview",toolbar:"undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | codesample | link image",valid_elements:"*[*]"},t.$on("onFinishRepeat",function(t){e.prismHighlight()})}]),e.directive("onFinishRepeat",["$timeout",function(e){return{restrict:"A",link:function(t,n,o){t.$last===!0&&e(function(){t.$emit(o.onFinishRepeat),t.prismHighlight()})}}}]),e.directive("subCatCounts",function(){return function(e,t,n){"doc"==e.group&&e.meanData.getDocCountsByCategory(n.subCatCounts).then(function(e){t.html(e.data)}),"que"==e.group&&e.meanData.getQueCountsByCategory(n.subCatCounts).then(function(e){t.html(e.data)})}}),e.run(["$transitions","$state","authentication",function(e,t,n){e.onStart({},function(e){e.$to().name.indexOf("admin")>=0&&(n.isLoggedIn()||t.go("login"))})}])}(),function(){angular.module("app").controller("loginCtrl",["$scope","authentication","meanData","$window","$rootScope",function(e,t,n,o,a){e.error=!1,e.login=function(){t.login(e.user).error(function(){e.error=!0}).then(function(){window.location.href="/"})},e.register=function(){n.createUser(e.userr).then(function(t){alert(t.data.message),e.user=e.userr,e.login()},function(e){alert(e.statusText)})}}])}(),function(){var e=angular.module("app");e.controller("adminCtrl",["$scope",function(e){}])}(),function(){angular.module("app").controller("dataNavCtrl",["$scope","meanData","authentication","$location","$sce","$stateParams","$state",function(e,t,n,o,a,r,u){e.meanData=t,e.isLoggedIn=n.isLoggedIn(),e.group=r.group,"doc"==e.group&&(e.navTitle="Documents"),"que"==e.group&&(e.navTitle="Questions Set"),e.getCategories=function(){t.getCategoriesByGroup(e.group).then(function(t){e.mainCategories=t.data},function(e){alert(e.data.errmsg)})},e.submitCat=function(){e.addCat.group=e.group,t.createCategory(e.addCat).then(function(e){alert(e.data.message),u.reload()},function(e){console.log(e),alert(e.data.errmsg)})},e.goToSubCatPage=function(t,n){o.path("/lc/"+e.group+"/"+t+"/"+n).search({page:1})},e.updateCategory=function(e){t.updateCategory(e).then(function(e){alert(e.data.message),u.reload()},function(e){alert(e.data.errmsg)})},e.deleteCategory=function(e){t.deleteCategory(e).then(function(e){alert(e.data.message),u.reload()},function(e){alert(e.data.errmsg)})}}])}(),function(){var e=angular.module("app");e.controller("homeCtrl",["$scope","$window","$location","meanData","authentication","$rootScope",function(e,t,n,o,a,r){function u(){e.filteredQuestions=null,e.filteredDocs=null,e.findedTile=null}e.showSearchDropDown=!1,e.curSelSearchKw=-1,e.isLoggedIn=a.isLoggedIn(),r.inputing=0,e.hostName=n.protocol()+"://"+location.host,angular.element(t).on("click",function(){e.showSearchDropDown=!1,e.$digest()}),e.clickSearch=function(){e.keywordBackup=e.keyword,e.$digest(),e.doSearch(0)},e.setDataId=function(t){e.dataId=t},e.setDataGroup=function(t){e.dataGroup=t},e.focusSearch=function(t){var n=1*e.curSelSearchKw+1*t,o=document.getElementById("search-"+n);if(o){e.setDataId(o.dataset.dataId),e.setDataGroup(o.dataset.dataGroup);var a=document.getElementById("search-"+e.curSelSearchKw);a&&(a.style.backgroundColor=null),e.curSelSearchKw=1*e.curSelSearchKw+1*t,r.inputing=-1,e.keyword=o.dataset.title,e.keywordBackup=o.dataset.title,e.$digest(),document.getElementById("search-"+n).style.backgroundColor="#ccc"}},e.mouseEnterSearch=function(t){r.inputing=-1,e.keyword=t,e.$digest()},e.mouseLeaveSearch=function(){r.inputing=0,e.keyword=e.keywordBackup,e.$digest()},e.$watch("selector",function(){r.inputing=0,e.keyword="",u()}),e.searchTitle=function(t){r.inputing=0,t?(e.showSearchDropDown=!0,e.curSelSearchKw=-1,e.keywordBackup=t,e.hightlyKeyword=t,"Doc"==e.selector&&o.getDocTitleByKeyword(t).then(function(t){e.findedTile=t.data}),"Quiz"==e.selector&&o.getQueTitleByKeyword(t).then(function(t){e.findedTile=t.data}),"All"==e.selector&&o.getRelatedByKeyword(t).then(function(t){var n=[];t.forEach(function(e){e.data.forEach(function(e){n.push(e)})}),e.findedTile=n,e.$digest()})):e.showSearchDropDown=!1},e.doSearch=function(t){e.keyword&&e.selector?(e.showSearchDropDown=!1,e.currentPage=1,"Quiz"==e.selector&&(1==t&&e.curSelSearchKw!=-1||0==t?o.getQueById(e.dataId).then(function(t){t.data.showAnswer=!0,e.updateQueList(t.data)}):o.getQuesByKeyword(e.keyword).then(function(t){e.filteredQuestions=t.data})),"Doc"==e.selector&&(1==t&&e.curSelSearchKw!=-1||0==t?o.getDocById(e.dataId).then(function(t){t.data.showAnswer=!0,e.updateDocList(t.data)}):o.getDocByKeyword(e.keyword).then(function(t){e.filteredDocs=t.data})),"All"==e.selector&&(e.clearQueList(),e.clearDocList(),1==t&&e.curSelSearchKw!=-1||0==t?("doc"==e.dataGroup&&o.getDocById(e.dataId).then(function(t){t.data.showAnswer=!0,e.updateDocList(t.data)}),"que"==e.dataGroup&&o.getQueById(e.dataId).then(function(t){t.data.showAnswer=!0,e.updateQueList(t.data)})):(o.getDocByKeyword(e.keyword).then(function(t){e.filteredDocs=t.data}),o.getQuesByKeyword(e.keyword).then(function(t){e.filteredQuestions=t.data})))):u()}}]),e.directive("toFocus",function(){return{scope:!1,restrict:"A",link:function(e,t,n){t.on("click",function(){e.setDataId(n.dataId),e.setDataGroup(n.dataGroup),e.clickSearch()}),t.on("mouseenter",function(t){e.setDataId(n.dataId),e.setDataGroup(n.dataGroup),e.mouseEnterSearch(n.title,t)}),t.on("mouseleave",function(t){e.mouseLeaveSearch(t)})}}}),e.filter("titleDecorator",["$rootScope",function(e){return function(e,t){var n="",o=e,a=function(e,t){var o=e.indexOf(t);if(o>=0){var a=e.substring(o+t.length);return n+=e.substring(0,o)+"<strong>"+t+"</strong>",a}};return t.split(" ").forEach(function(e){var t=a(o,e);"undefined"!=typeof t&&(o=t)}),n+o}}]),e.directive("searchFocus",function(){return{scope:!1,restrict:"A",link:function(e,t,n){t.on("keydown",function(t){13==t.keyCode&&e.doSearch(1),40!=t.keyCode&&38!=t.keyCode||e.showSearchDropDown&&(t.preventDefault(),40==t.keyCode?e.focusSearch(1):e.focusSearch(-1))})}}})}(),function(){angular.module("app").controller("listContainerCtrl",["$scope","$rootScope","meanData","authentication","$location","$stateParams","$state","$stateParams",function(e,t,n,o,a,r,u,r){e.hostName=a.protocol()+"://"+location.host,e.subCategory=r.category,e.numPerPage=5,e.$on("totalItems",function(t,n){e.totalItems=n}),e.$on("selectedPage",function(t,n){e.selectedPage=n}),e.goToDataNav=function(){a.path("/nav/"+a.path().split("/")[2])},e.$watch("numPerPage",function(){e.numPerPage>0&&e.$broadcast("changeNumPerPage",e.numPerPage)}),e.$watch("dateSortOption",function(){e.$broadcast("changeDateSortOption",e.dateSortOption)}),e.$watch("selectedPage",function(){e.selectedPage>0&&e.$broadcast("changePage",e.selectedPage)})}])}(),function(){angular.module("app").controller("historyCtrl",["$scope","meanData",function(e,t){e.getHistory=function(){t.getSettings().then(function(t){e.history=t.data[0].history})}}])}(),function(){angular.module("app").controller("adminAccessCtrl",["$scope","meanData","$state",function(e,t,n){e.findAllLogs=function(){t.getAllLogs().then(function(t){e.logs=t.data})},e.deleteAllLogs=function(){t.deleteAllLogs().then(function(e){alert(e.data.message),n.reload()})}}])}(),function(){var e=angular.module("app");e.controller("adminMgCtrl",["$scope",function(e){e.doGenerate=function(e){}}])}(),function(){angular.module("app").controller("adminOverviewsCtrl",["$scope","meanData",function(e,t){e.getDocCounts=function(){t.getDocCounts().then(function(t){e.docNums=t.data})},e.getQueCounts=function(){t.getQueCounts().then(function(t){e.queNums=t.data})},e.getQueNullCounts=function(){t.getQueCountsByAnswer("null").then(function(t){e.nullQueNums=t.data})}}])}(),function(){angular.module("app").controller("adminSettingsCtrl",["$scope","meanData","$state",function(e,t,n){e.backupDB=function(){t.doDBBackup().then(function(e){alert(e.data.message),n.reload()})},e.getSettings=function(){t.getSettings().then(function(t){t.length>1?alert("More than one settings found!"):e.settings=t.data[0]})},e.updateSettings=function(e){t.updateSettings(e).then(function(e){alert(e.data.message),window.location.href="/admin/settings"})},e.deleteSettings=function(){t.deleteSettings().then(function(e){alert(e.data.message)})}}])}(),function(){var e=angular.module("app");e.controller("userReqCtrl",["$scope","meanData","$state",function(e,t,n){e.getAllUserRequests=function(){t.getAllUserRequests().then(function(t){e.requests=t.data})},e.deleteRequest=function(e){t.deleteUserRequest(e).then(function(e){alert(e.data.message),n.reload()})}}])}(),function(){angular.module("app").controller("adminUsersCtrl",["$scope","meanData",function(e,t){t.getAllUsers().then(function(t){e.users=t.data}),e.deleteUser=function(e){confirm("Are you sure to delete?")&&t.deleteUser(e).then(function(e){alert(e.message)})}}])}(),function(){angular.module("app").service("authentication",["$http","$window","$q",function(e,t,n){var o=function(e){t.localStorage["mean-token"]=e},a=function(){return t.localStorage["mean-token"]},r=function(){var e,n=a();return!!n&&(e=n.split(".")[1],e=t.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},u=function(){if(r()){var e=a(),n=e.split(".")[1];return n=t.atob(n),n=JSON.parse(n)}},i=function(t){return e.post("/api/login",t).success(function(e){o(e.token)})},c=function(){t.localStorage.removeItem("mean-token")};return{login:i,isLoggedIn:r,currentUser:u,logout:c,getToken:a,saveToken:o}}])}(),function(){angular.module("app").service("meanData",["$http","$q","authentication",function(e,t,n){var o="/api",a={headers:{Authorization:"Bearer "+n.getToken()}},r=function(){return e.get(o+"/user")},u=function(t){return e.get(o+"/user/"+t)},i=function(t){return e.post(o+"/user",t,a)},c=function(t){return e.put(o+"/user",t,a)},s=function(t){return e["delete"](o+"/user?id="+t,a)},l=function(t){return e.get(o+"/que/c/"+t)},d=function(t,n,a){if(a>0&&n>0)return e.get(o+"/que/c/"+t+"/"+n+"?num="+a)},g=function(t){return e.get(o+"/que/id/"+t)},f=function(){return e.get(o+"/que/c")},p=function(t){return e.post(o+"/que",t,a)},m=function(t){return e.put(o+"/que",t,a)},h=function(t){return e["delete"](o+"/que/id/"+t,a)},y=function(t){return e.get(o+"/s/q/"+t+"?need=title")},w=function(t){return e.get(o+"/s/q/"+t+"?need=")},D=function(t){return e.get(o+"/doc/id/"+t)},v=function(){return e.get(o+"/doc/c")},C=function(t){return e.get(o+"/doc/c/"+t)},$=function(t,n,a){if(a>0&&n>0)return e.get(o+"/doc/c/"+t+"/"+n+"?num="+a)},S=function(t){return e.post(o+"/doc",t,a)},P=function(t){return e.put(o+"/doc",t,a)},Q=function(t){return e["delete"](o+"/doc/id/"+t,a)},q=function(t){return e.get(o+"/s/d/"+t+"?need=title")},k=function(t){return e.get(o+"/s/d/"+t+"?need=")},U=function(){return e.get(o+"/cat")},B=function(t){return e.get(o+"/cat/"+t)},I=function(t){return e.post(o+"/cat",t,a)},A=function(t){return e.put(o+"/cat",t,a)},b=function(t){return e["delete"](o+"/cat/id/"+t,a)},L=function(){return e.get(o+"/log",a)},R=function(t){return e.get(o+"/log?ip="+t,a)},T=function(t){return e.get(o+"/log?date="+t,a)},K=function(){return e["delete"](o+"/log",a)},E=function(){return e.get(o+"/settings",a)},O=function(){return e.get(o+"/settings/dbbu",a)},N=function(t){return e.put(o+"/settings",t,a)},G=function(){return e["delete"](o+"/settings",a)},x=function(t){return e.get(o+"/count/doc/"+t)},M=function(t){return e.get(o+"/count/que/"+t)},_=function(){return e.get(o+"/count/doc")},H=function(){return e.get(o+"/count/que")},j=function(t){return e.get(o+"/count/que/all/"+t)},F=function(){return e.get(o+"/req")},z=function(t){return e.post(o+"/req",t)},J=function(t){return e["delete"](o+"/req/"+t)},Y=function(n){var a=new Promise(function(a,r){t.all([e.get(o+"/s/d/"+n+"?need=title+group"),e.get(o+"/s/q/"+n+"?need=title+group")]).then(function(e){a(e)})});return a};return{getAllUsers:r,createUser:i,updateUser:c,deleteUser:s,getUserById:u,getQueById:g,getQueCategories:f,getQuesByCategoryAndPage:d,getQuesByCategory:l,createQue:p,updateQue:m,deleteQue:h,getDocById:D,getDocCategories:v,getDocByCategoryAndPage:$,getDocByCategory:C,createDoc:S,updateDoc:P,deleteDoc:Q,getCategories:U,getCategoriesByGroup:B,createCategory:I,updateCategory:A,deleteCategory:b,getQueTitleByKeyword:y,getDocTitleByKeyword:q,getQuesByKeyword:w,getDocByKeyword:k,getRelatedByKeyword:Y,getAllLogs:L,getLogsByIp:R,getLogsByDate:T,deleteAllLogs:K,getDocCountsByCategory:x,getQueCountsByCategory:M,getDocCounts:_,getQueCounts:H,getQueCountsByAnswer:j,getSettings:E,updateSettings:N,deleteSettings:G,getAllUserRequests:F,sendUserRequest:z,deleteUserRequest:J,doDBBackup:O}}])}(),function(){angular.module("app").directive("addDoc",["$stateParams","meanData","$state","$location","authentication",function(e,t,n,o,a){return{restrict:"E",require:"?ngModel",scope:!1,templateUrl:"/document/add-document/add-document.view.html",link:function(o,r,u){o.addDocPage=function(){o.addD=new Object,o.showAdd=!0,o.addD.category=e.category,o.addD.title=o.subCategory.toLowerCase()+" ",o.showCategories("doc"),o.categorySetter(o.addD.category),o.selRelateds=[]},o.cancelAddDoc=function(){confirm("Are you sure to discard the create?")&&(o.selRelateds=null,o.addD=null)},o.submitDoc=function(){o.addD&&(o.addD.related=[],o.addD.category=o.categorModel_,o.selRelateds.forEach(function(e){o.addD.related.push(e)}),o.addD.author=a.currentUser().name,t.createDoc(o.addD).then(function(e){alert(e.data.message),n.reload()},function(e){alert(e.data.message)}))}}}}])}(),function(){angular.module("app").directive("listDoc",["$rootScope","$stateParams","meanData","$state","$location","authentication",function(e,t,n,o,a,r){return{restrict:"E",require:"?ngModel",scope:!1,templateUrl:"/document/list-document/list-document.view.html",link:function(e,u,i){e.isLoggedIn=r.isLoggedIn(),e.docId=t.id,e.currentPage=t.page,e.mainCategory=t.mainCategory;var c=function(t){var n=(t-1)*e.numPerPage,o=n+e.numPerPage;e.docs&&(e.filteredDocs=e.docs.slice(n,o))};e.docId?n.getDocById(e.docId).then(function(t){e.filteredDocs=[t.data],e.filteredDocs[0].showAnswer=!0}):e.subCategory&&(e.currentPage?n.getDocByCategory(e.subCategory).then(function(t){e.docs=t.data,e.$emit("totalItems",t.data.length),e.selectedPage=e.currentPage,c(e.currentPage),e.$emit("selectedPage",e.currentPage),e.updateDocList()}):a.path().search({page:1})),e.goToDocNav=function(){a.path("/nav/doc")},e.doDeepCopy=function(t){e.backupDoc=angular.copy(t)},e.$on("changePage",function(e,t){a.path(a.path()).search({page:t}),c(t)}),e.$on("changeNumPerPage",function(t,n){e.numPerPage=n,e.updateDocList()}),e.$on("changeDateSortOption",function(t,n){e.docs.reverse(),e.updateDocList()}),e.clearDocList=function(){e.filteredDocs=null},e.updateDocList=function(t){if("object"==typeof t){var n=[];return n.push(t),e.filteredDocs=n}c(e.currentPage)},e.$watch("currentPage",function(){e.currentPage>0&&e.updateDocList()}),e.resetUpdateDoc=function(t){confirm("Are you sure to discard your records?")&&(e.backupDoc.isUpdateDoc=!1,Object.keys(t).forEach(function(n){t[n]=e.backupDoc[n]}),setTimeout(function(){e.prismHighlight()}),t.showAnswer=!0)},e.updateDocPage=function(t){t.isUpdateDoc=!0,e.doDeepCopy(t),e.showCategories(t.group),e.categorySetter(t.category),e.selRelateds=t.related},e.updateDoc=function(t,a){var r=a!=t.category;confirm("Are you sure to make a update?")&&(t.related=[],t.category=a,e.selRelateds.forEach(function(e){t.related.push(e)}),n.updateDoc(t).then(function(n){return alert(n.data.message),r?o.reload():(t.isUpdateDoc=!1,void setTimeout(function(){e.prismHighlight()}))},function(e){alert(e.statusText)}))},e.deleteDoc=function(e){confirm("Are you sure to delete this document?")&&n.deleteDoc(e._id).then(function(e){alert(e.data.message),o.reload()},function(e){alert(e.statusText)})}}}}])}(),function(){angular.module("app").directive("addQue",["meanData","authentication","$location","$stateParams","$state",function(e,t,n,o,a){return{restrict:"E",require:"?ngModel",scope:!1,templateUrl:"/question/add-question/add-question.view.html",link:function(r,u,i){r.showCategories=function(){e.getCategoriesByGroup("que").then(function(e){r.categoriesOptions=e.data})},r.goToQueNav=function(){n.path("/nav/que")},r.addQuePage=function(){r.addQ=new Object,r.showAdd=!0,r.showCategories("que"),r.addQ.category=o.category,r.categorySetter(r.addQ.category),r.selRelateds=[]},r.submitQue=function(){r.addQ&&(r.addQ.related=[],r.selRelateds.forEach(function(e){r.addQ.related.push(e)}),r.addQ.category=r.categorModel_,r.addQ.author=t.currentUser().name,r.addQ.unknownCompany&&(r.addQ.company="Unknown"),e.createQue(r.addQ).then(function(e){alert(e.data.message),a.reload()},function(e){alert(e.data.message)}))}}}}])}(),function(){angular.module("app").directive("listQue",["meanData","$stateParams","authentication","$state","$location",function(e,t,n,o,a){return{scope:!1,restrict:"E",templateUrl:"/question/list-question/list-question.view.html",link:function(r,u,i){r.isLoggedIn=n.isLoggedIn(),r.questionId=t.id,r.mainCategory=t.mainCategory,r.currentPage=t.page,r.reverse=!0;var c=function(e){var t=(e-1)*r.numPerPage,n=t+r.numPerPage;r.questions&&(r.filteredQuestions=r.questions.slice(t,n))};r.orderByDate=function(e){var t=e.created.split("-");temp=t[2].substring(0,2);var n=parseInt(temp+t[1]+t[0]);return-n},r.questionId?e.getQueById(r.questionId).then(function(e){r.filteredQuestions=[e.data],r.filteredQuestions[0].showAnswer=!0}):r.subCategory&&(r.currentPage?e.getQuesByCategory(r.subCategory).then(function(e){r.questions=e.data,r.$emit("totalItems",e.data.length),r.selectedPage=r.currentPage,c(r.currentPage),r.$emit("selectedPage",r.currentPage),r.updateQueList()}):a.path().search({page:1})),r.sendRequest=function(t,n){return t?(t.link=r.hostName+"/"+n.group+"?id="+n._id,void e.sendUserRequest(t).then(function(e){alert(e.data.message),Object.keys(t).forEach(function(e){t[e]=null}),n.showCorrect=!1})):alert("Invalid Input!")},r.$on("changePage",function(e,t){a.path(a.path()).search({page:t}),c(t)}),r.$on("changeNumPerPage",function(e,t){t>-1&&(r.numPerPage=t,r.updateQueList())}),r.$on("changeDateSortOption",function(e,t){t&&(r.questions.reverse(),r.updateQueList())}),r.updateQuePage=function(e){e.isUpdateQuestion=!0,e.showAnswer=!0,r.showCategories(e.group),r.categorySetter(e.category),r.selRelateds=e.related,r.questionBackup=angular.copy(e)},r.clearQueList=function(){r.filteredQuestions=null},r.updateQueList=function(e){if("object"==typeof e){var t=[];return t.push(e),r.filteredQuestions=t}c(r.currentPage)},r.$watch("currentPage",function(){r.currentPage>0&&r.updateQueList()}),r.updateQuestion=function(t,a,u){if(confirm("Are you sure to update?")){var i=u!=t.category;t.category=u,t.author=n.currentUser().name,t.related=[],a.forEach(function(e){t.related.push(e)}),t.unknownCompany&&(t.company="Unknown"),e.updateQue(t).then(function(e){return alert(e.data.message),i?o.reload():(t.isUpdateQuestion=!1,void setTimeout(function(){r.prismHighlight()}))},function(e){alert(e.statusText)})}},r.cancelUpdateQue=function(e){confirm("Are you sure to discards update?")&&(Object.keys(e).forEach(function(t){e[t]=r.questionBackup[t]}),e.isUpdateQuestion=!1,setTimeout(function(){r.prismHighlight()}))},r.deleteQuestion=function(t){confirm("Are you sure to delete this question?")&&e.deleteQue(t._id).then(function(e){alert(e.data.message),o.reload()},function(e){alert(e.statusText)})}}}}])}(),function(){angular.module("app").directive("navigation",function(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.view.html"}}).controller("navCtrl",["$scope","$location","authentication","$state","$window","$rootScope",function(e,t,n,o,a,r){e.logout=function(){n.logout(),a.location.href="/"},e.currentUser=n.currentUser(),e.isLoggedIn=n.isLoggedIn(),r.isActive=function(e){return"/"===e?t.path()===e:t.path().indexOf(e)>=0}}])}(),function(){angular.module("app").directive("category",["meanData",function(e){return{restrict:"E",require:"?ngModel",scope:!1,templateUrl:"/common/directives/category/category.view.html",link:function(t,n,o){t.categorySetter=function(e){t.categorModel_=e},t.showCategories=function(n){e.getCategoriesByGroup(n).then(function(e){t.categoriesOptions=e.data})}}}}])}(),function(){angular.module("app").directive("related",["meanData",function(e){return{scope:!1,restrict:"E",templateUrl:"/common/directives/related/related.view.html",link:function(t,n,o){t.removeCurSelRelated=function(e,t){e.splice(t,1)},t.addThisRelated=function(e,t){if(!t)return!1;if(e.length<1)e.push(t[0]);else for(var n=0;n<e.length&&e[n].title!=t[0].title;n++)n==e.length-1&&e.push(t[0])},t.getRelatedByKeyword=function(n){n?e.getRelatedByKeyword(n).then(function(e){var n=[];e.forEach(function(e){e.data.forEach(function(e){n.push(e)})}),t.relateds=n,t.$digest()}):t.relateds=null}}}}])}();
//# sourceMappingURL=app.min.js.map
